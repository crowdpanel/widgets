!function(e,t){let n="crowdpanel-reviews",o="crowdpanel-reviews-main-area",i="crowdpanel-reviews-error-area",a="crowdpanel-reviews-textarea-container-",r="crowdpanel-reviews-textarea-",l="crowdpanel-reviews-logging-container",c="crowdpanel-reviews-logged-in-container",d="crowdpanel-reviews-logged-out-container",s="crowdpanel-reviews-login-button",u="crowdpanel-reviews-logout-button",p="crowdpanel-reviews-submit-comment-button-",m="crowdpanel-reviews-login-modal",v="crowdpanel-reviews-login-form",g="crowdpanel-reviews-login-submit",w="crowdpanel-reviews-emoji-like",f="crowdpanel-reviews-emoji-love",h="crowdpanel-reviews-emoji-laugh",_="crowdpanel-reviews-emoji-wow",b="crowdpanel-reviews-emoji-sad",y="crowdpanel-reviews-emoji-angry",k="crowdpanel-reviews-emoji-like-count",x="crowdpanel-reviews-emoji-love-count",T="crowdpanel-reviews-emoji-laugh-count",j="crowdpanel-reviews-emoji-wow-count",C="crowdpanel-reviews-emoji-sad-count",L="crowdpanel-reviews-emoji-angry-count",M="crowdpanel-reviews-comment-area",S="crowdpanel-reviews-comment-total-container-",N="crowdpanel-reviews-comment-",E="crowdpanel-reviews-comment-count-container-",R="crowdpanel-reviews-comment-toggle-",A="crowdpanel-reviews-comment-child-area-",B="crowdpanel-reviews-comment-border-",H="crowdpanel-reviews-comment-menu-",D="crowdpanel-reviews-comment-menu-btn-",F="crowdpanel-reviews-comment-approve-btn-",I="crowdpanel-reviews-author-avatar",O="crowdpanel-reviews-comment-badge-",q="crowdpanel-reviews-reply-",P="crowdpanel-reviews-upvote-",$="crowdpanel-reviews-downvote-",G="crowdpanel-reviews-like-",U="crowdpanel-reviews-vote-count-",J="crowdpanel-reviews-like-count-",W="crowdpanel-reviews-rating-1",V="crowdpanel-reviews-rating-2",X="crowdpanel-reviews-rating-3",Y="crowdpanel-reviews-rating-4",z="crowdpanel-reviews-rating-5",K=null;const Q="https://server.crowdpanel.co";let Z=parent.location.pathname;const ee=[],te=[];let ne,oe,ie,ae,re,le=0,ce=!1,de={},se={},ue={},pe={},me=0,ve=0,ge={},we=!1,fe=!1;function he(e){return t.createElement(e)}function _e(e,t){e.classList.add("crowdpanel-reviews-"+t)}function be(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.add("crowdpanel-reviews-"+n)})}}function ye(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.remove("crowdpanel-reviews-"+n)})}}function ke(e,t){e.appendChild(t)}function xe(e,t){e.prepend(t)}function Te(e){return t.getElementById(e)}function je(e){null!==e&&e.parentNode.removeChild(e)}function Ce(e,t){null!==e&&e.classList.remove("crowdpanel-reviews-"+t)}function Le(e){e.classList.add("crowdpanel-reviews-dark")}function Me(e){if(null!==e){let t=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(t,e),t}return e}function Se(e,t,n){e.addEventListener("click",function(){t(n)},!1)}function Ne(e,t,n){e.setAttribute(t,n)}function Ee(e,t,n){e.removeAttribute(t,n)}function Re(){let e=("; "+t.cookie).split("; crowdpanel-widget-token=");if(2===e.length)return e.pop().split(";").shift()}function Ae(e){let n="",o=new Date;o.setTime(o.getTime()+2592e6),n="; expires="+o.toUTCString(),t.cookie="crowdpanel-widget-token="+e+n+"; path=/"}function Be(e,t,n){let o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){n(JSON.parse(o.response))},o.send(JSON.stringify(t))}function He(e){"function"==typeof e&&e()}function De(e){ee.length=0,Z="/"===Z?"index":Z.replace(/\//,"");let n={domain:parent.location.host,path:Z,title:t.title,userId:de.user_id};Be(Q+"/api/widget/review/main",n,function(t){if(t.error)return void Ke(t.error.message);Qe(),ae=t.data[0].domain_id,re=t.data[0].page_id,te.push(...t.data[0].moderators);let n=t.data.slice(1);le=t.data[0].comment_count||0,me=t.data[0].ratings_count||0,ve=t.data[0].total_ratings||0,ge={5:t.data[0].rating_5||0,4:t.data[0].rating_4||0,3:t.data[0].rating_3||0,2:t.data[0].rating_2||0,1:t.data[0].rating_1||0},we?te.indexOf(de.email)>-1?(ce=!0,ee.push(...n)):n&&n.forEach(e=>{e.author_id===de.user_id?(e.isCommentAuthor=!0,ee.push(e)):"active"===e.status&&ee.push(e)}):n.forEach(e=>{"active"===e.status&&ee.push(e)}),oe=t.data[0].reaction,se={self_moderate:t.data[0].self_moderate,likes:t.data[0].likes,voting:t.data[0].voting,emojis:t.data[0].emojis,time_stamp:t.data[0].time_stamp,emails:t.data[0].moderator_emails},pe={google:t.data[0].google,facebook:t.data[0].facebook,github:t.data[0].github,crowdpanel:t.data[0].crowdpanel,sso:t.data[0].sso},ue={like_count:t.data[0].thumbs_up_count,love_count:t.data[0].love_count,laugh_count:t.data[0].laugh_count,wow_count:t.data[0].wow_count,sad_count:t.data[0].sad_count,angry_count:t.data[0].angry_count},He(e)})}function Fe(e){let t=he("div"),n=he("div"),o=he("div"),i=he("textarea"),l=he("button");var d;return t.id=a+e,n.id=c,i.id=r+e,l.id=p+e,_e(t,"textarea-container"),_e(o,"rating-comment-container"),_e(i,"textarea"),fe&&Le(i),_e(l,"submit-button"),0==ee.length&&"root"==e?Ne(i,"placeholder","Be the first to comment"):Ne(i,"placeholder","Add a comment"),"root"!==e&&Ne(t,"style","padding-left: 40px"),l.innerText="COMMENT",i.oninput=(d=i,function(){d.style.height="",d.style.height=Math.min(Math.max(d.scrollHeight,75),400)+"px"}),Se(l,Ue,e),ke(t,n),ke(t,i),ke(o,l),"root"===e&&ke(o,function(){let e=he("div"),t=he("input"),n=he("input"),o=he("input"),i=he("input"),a=he("input"),r=he("label"),l=he("label"),c=he("label"),d=he("label"),s=he("label");_e(e,"rating-container");let u=[t,n,o,i,a];for(let e=0;e<u.length;e++){let t=e+1,n=u[e];n.type="radio",n.name="crowdpanel-rating",n.id="crowdpanel-reviews-rating-"+t,n.value=t}return r.htmlFor=W,l.htmlFor=V,c.htmlFor=X,d.htmlFor=Y,s.htmlFor=z,ke(e,a),ke(e,s),ke(e,i),ke(e,d),ke(e,o),ke(e,c),ke(e,n),ke(e,l),ke(e,t),ke(e,r),e}()),ke(t,o),t}function Ie(e,t){let n=he("div"),o=he("span"),i=he("span"),a=he("div"),r=he("div");return o.innerText=e,i.innerText=`${t}%`,r.style.width=`${t}%`,_e(o,"ratings-count"),_e(i,"ratings-votes"),_e(a,"ratings-bar-container"),_e(r,"ratings-bar-loader"),_e(n,"ratings-count-container-individual"),ke(a,r),ke(n,o),ke(n,a),ke(n,i),n}function Oe(e,t){t?(Ne(e,"style","border: none"),_e(e,"toggle--loading")):(Ne(e,"style","color: transparent"),_e(e,"button--loading"))}function qe(e,t){t?(Ee(e,"style","border: none"),Ce(e,"toggle--loading")):(Ne(e,"style","color: white"),Ce(e,"button--loading"))}function Pe(e){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}function $e(e){const t=["#D83B01","#B50E0E","#E81123","#B4009E","#5C2D91","#0078D7","#00B4FF","#008272","#107C10","#FFB900"];if(!e)return t[0];let n=0;for(let t=0;t<e.length;t++)n+=e.charCodeAt(t);return t[n%t.length]}function Ge(e){let t=Te(M);t.innerHTML="";let n=it(e,"root");n&&ke(t,n)}function Ue(t){Oe(Te(p+t)),we?e.newComment(t,Re()):(qe(Te(p+t)),e.loginBoxShow(t))}function Je(e){Te(H+e).classList.toggle("crowdpanel-reviews-dropdown-opened")}function We(t){let n=Te(E+t),o=Te(R+t),i=Te(B+t);Ce(o,"comments-toggle-up"),_e(o,"comments-toggle-down"),Ne(i,"style","display: block"),e.loadChildren(t),Se(n=Me(n),Ve,t)}function Ve(e){let t=Te(E+e),n=Te(R+e),o=Te(A+e),i=Te(B+e);Ce(n,"comments-toggle-down"),_e(n,"comments-toggle-up"),Ne(i,"style","display: none"),Ne(o,"style","display: none"),Se(t=Me(t),Xe,e)}function Xe(e){let t=Te(E+e),n=Te(R+e),o=Te(A+e),i=Te(B+e);Ce(n,"comments-toggle-up"),_e(n,"comments-toggle-down"),Ne(i,"style","display: block"),Ee(o,"style","display: none"),Se(t=Me(t),Ve,e)}function Ye(t,n,o,i,a){return t=Me(t),n=Me(n),i>0?(Se(t,e.voteComment,[o,[1,0],a]),Se(n,e.voteComment,[o,[1,-1],a])):i<0?(Se(t,e.voteComment,[o,[-1,1],a]),Se(n,e.voteComment,[o,[-1,0],a])):(Se(t,e.voteComment,[o,[0,1],a]),Se(n,e.voteComment,[o,[0,-1],a])),[t,n]}function ze(t,n,o,i){return Se(t=Me(t),e.likeRequest,[n,!o,i]),t}function Ke(e){let t=Te(i);t.innerText=e,Ne(t,"style","display: block;")}function Qe(){Ne(Te(i),"style","display: none;")}function Ze(e){if(oe){let e=Te(w),t=Te(f),n=Te(h),o=Te(_),i=Te(b),a=Te(y);switch(be(e,t,n,o,i,a,"emoji-unactive"),oe){case"like":Ce(e,"emoji-unactive"),_e(e,"emoji-active");break;case"love":Ce(t,"emoji-unactive"),_e(t,"emoji-active");break;case"laugh":Ce(n,"emoji-unactive"),_e(n,"emoji-active");break;case"wow":Ce(o,"emoji-unactive"),_e(o,"emoji-active");break;case"sad":Ce(i,"emoji-unactive"),_e(i,"emoji-active");break;case"angry":Ce(a,"emoji-unactive"),_e(a,"emoji-active")}}He(e)}function et(){let t,n=he("div"),o=he("div"),i=he("span");i.innerText=de.full_name;let a=he("button");return n.id=c,a.id=u,_e(a,"button"),_e(n,"logging-container"),_e(o,"logging-container-left-div"),fe&&(Le(a),Le(o)),a.innerText="Logout",Se(a,e.logout,null),de.avatar_url?((t=he("img")).src=de.avatar_url,_e(t,"author-avatar-img")):((t=he("div")).style.background=$e(de.full_name),t.innerHTML=de.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),_e(t,"author-avatar-alpha")),ke(o,t),ke(o,i),ke(n,a),ke(n,o),n}function tt(){let t=he("div"),n=he("button");return t.id=d,n.id=s,_e(n,"button"),fe&&Le(n),_e(t,"logging-container"),n.innerText="Login",Se(n,e.loginBoxShow,null),ke(t,n),t}function nt(e){je(Te(d)),ke(Te(l),et()),He(e)}function ot(t,n,o){let i=he("div"),a=he("button"),r=he("div");if(a.id=D+t,r.id=H+t,_e(a,"icon-button-menu"),_e(i,"dropdown"),fe&&Le(a),_e(r,"dropdown-content"),Se(a,Je,t),ce&&("flagged"===n||"pending"===n)){let n=he("span");n.id=F+t,n.innerText="Approve",Se(n,e.approveComment,t),ke(r,n)}if(ce||o){let n=he("span");n.innerText="Delete",Se(n,e.deleteComment,t),ke(r,n)}return ke(i,a),ke(i,r),i}function it(t,n){let o=he("div"),i=new Date;return t.forEach(function(t){let n,a=new Date(t.created_at),r=he("div"),l=he("div"),c=he("div"),d=he("div"),s=he("div"),u=he("div"),p=he("div"),m=he("div"),v=he("div"),g=he("span"),w=he("div"),f=he("div"),h=he("div"),_=he("div"),b=he("div"),y=he("div"),k=he("div"),x=he("span"),T=he("div"),j=he("span"),C=he("span"),L=he("span");l.id=N+t.id,v.id=A+t.id,r.id=S+t.id,f.id=R+t.id,T.id=E+t.id,s.id=B+t.id,_e(r,"total-container"),_e(l,"comment-container"),_e(v,"comment-child-container"),_e(c,"comment-left"),_e(d,"comment-right"),_e(u,"comment-head"),_e(p,"comment-body"),_e(m,"comment-footer"),_e(s,"comment-border"),_e(w,"comment-toggle-container"),_e(C,"comment-date"),_e(j,"author-name"),fe&&(Le(p),Le(C),Le(j),Le(g),Le(L)),_e(g,"reply-button"),_e(f,"comments-toggle"),_e(f,"comments-toggle-up"),_e(L,"comment-reply-count"),_e(h,"author-name-container"),_e(_,"comment-head-left-container"),_e(b,"comment-head-right-container"),_e(k,"comment-rating-container"),_e(x,"comment-rating-star"),_e(y,"footer-actions-container"),_e(T,"comment-count-container"),p.innerHTML=t.comment_text,j.innerText=t.full_name;let M=te.indexOf(t.email)>-1;if(C.innerHTML=function(e,t){let n=i-a;return n<15e3?"just now":n<12e4?Math.round(n/1e3)+" seconds ago":n<72e5?Math.round(n/6e4)+" minutes ago":n<1728e5?Math.round(n/36e5)+" hours ago":n<5184e6?Math.round(n/864e5)+" days ago":n<62208e6?Math.round(n/2592e6)+" months ago":Math.round(n/31104e6)+" years ago"}(),C.title=a,g.id=q+t.id,g.innerHTML="Reply",L.innerHTML=t.children_count,Se(g,e.showReply,t.id),Se(T,We,t.id),t.avatar_url?((n=he("img")).src=t.avatar_url,_e(n,"author-avatar-img")):((n=he("div")).style.background=$e(t.full_name),n.innerHTML=t.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()||"?",_e(n,"author-avatar-alpha")),n.id=I,ke(c,n),ke(h,j),(M||"active"!==t.status)&&ke(h,function(e,t,n){let o=he("span");return _e(o,"comment-badge"),o.id=O+e,n?_e(o,"comment-badge-moderator"):"flagged"===t?(_e(o,"comment-badge-flagged"),o.innerHTML="FLAGGED"):"pending"===t&&(_e(o,"comment-badge-pending"),o.innerHTML="PENDING"),o}(t.id,t.status,M)),ke(_,h),se.time_stamp&&ke(_,C),t.rating)for(let e=0;e<t.rating;e++)k.appendChild(x.cloneNode(!0));if(ke(u,_),ke(b,k),we&&(ce?ke(b,ot(t.id,t.status,t.isCommentAuthor)):t.isCommentAuthor&&ke(b,ot(t.id,t.status,t.isCommentAuthor))),ke(u,b),se.voting){let n=he("button"),o=he("button"),i=he("div"),a=he("span");if(n.id=P+t.id,o.id=$+t.id,a.id=U+t.id,we){t.vote_value>0?_e(n,"vote-active"):t.vote_value<0&&_e(o,"vote-active");let e=Ye(n,o,t.id,t.vote_value,t.vote_id);n=e[0],o=e[1]}else Se(n,e.loginBoxShow,null),Se(o,e.loginBoxShow,null);_e(n,"icon-button-upvote"),_e(o,"icon-button-downvote"),_e(a,"numeral-span"),fe&&Le(a),_e(i,"footer-voting-container"),a.innerText=Pe(t.vote_count),ke(i,n),ke(i,a),ke(i,o),ke(y,i)}else if(se.likes){let n=he("button"),o=he("div"),i=he("span");n.id=G+t.id,i.id=J+t.id,we?(t.liked&&_e(n,"like-active"),n=ze(n,t.id,t.liked,t.like_id)):Se(n,e.loginBoxShow,null),_e(n,"icon-button-like"),_e(i,"numeral-span"),fe&&(Le(n),Le(i)),_e(o,"footer-likes-container"),i.innerText=Pe(t.like_count),ke(o,n),ke(o,i),ke(y,o)}ke(m,g),ke(m,y),ke(d,u),ke(d,p),ke(d,m),ke(l,c),ke(l,d),ke(T,L),ke(w,f),ke(T,w),t.children_count>0&&ke(r,T),ke(r,s),ke(r,l),ke(r,v),ke(o,r)}),o}function at(){void 0===ne?lt():rt(ne,lt)}function rt(e,n){let o=t.getElementsByTagName("HEAD")[0],i=he("link");i.rel="stylesheet",i.type="text/css",i.href=e,function(e,t,n){i.addEventListener("load",function(){t(void 0)})}(0,n),ke(o,i)}function lt(){Ne(Te(o),"style","")}e.socialAuth=function(t){let n={provider:t.provider,domainId:ae},o=window.open("","_blank");Be(Q+"/api/widget/oauth",n,function(e){o.location=e.data,ie=e.token});var i=setInterval(function(){o.closed&&(clearInterval(i),Be(Q+"/api/widget/authlogin",{sessionToken:ie},function(t){if(t.error)return Ke(t.error.message),void(we=!1);e.loginBoxClose(),Qe(),we=!0,Ae(t[0].user_id),de=t[0],nt(function(){De(function(){Ze(function(){Ge(ee)})})})}))},250)},e.newComment=function(n,o){let i,a=Te(r+n),l=a.value;if(""===l)return _e(a,"red-border"),void qe(Te(p+n));Ce(a,"red-border");let c="pending";se.self_moderate?ce&&(c="active"):c="active";const d="root"===n?null:n;"root"===n&&(i=function(){let e,n=t.querySelectorAll('input[name="crowdpanel-rating"]');for(const t of n)t.checked&&(e=t.value);return e||0}());let s={author_id:o,status:c,page_id:re,parent_id:d,comment_text:l,rating:i||null,created_at:new Date};qe(Te(p+n)),Be(Q+"/api/widget/review/new",s,function(t){if(t.error||!t)return"23505"===t.error.code&&window.alert("You can't review twice! Delete your old review before making another one."),void qe(Te(p+n));a.value="",qe(Te(p+n)),"root"!==n&&e.collapseReply(n);let o=it([{id:t.data[0].id,full_name:de.full_name,avatar_url:de.avatar_url,author_id:t.data[0].author_id,page_id:t.data[0].page_id,comment_text:t.data[0].comment_text,status:c,parent_id:t.data[0].parent_id,rating:i||null,vote_count:0,like_count:0,created_at:s.created_at,isCommentAuthor:!0}]);xe(Te("root"!==n?A+n:M),o)})},e.deleteComment=function(e){if(ce&&Je(e),!confirm("Are you sure you want to delete this comment?"))return;let t={id:e,user_id:de.user_id};Be(Q+"/api/widget/review/remove",t,function(t){if(t.error||!t)return;let n=Te(S+e);"deleted"===t.data[0].status&&Ne(n,"style","display: none")})},e.approveComment=function(e){if(Je(e),!ce)return;let t={id:e,user_id:de.user_id};Be(Q+"/api/widget/review/approve",t,function(t){if(!t.error&&t&&"active"===t.data[0].status){let t=Te(O+e),n=Te(F+e);Ne(t,"style","display: none"),Ne(n,"style","display: none")}})},e.loadChildren=function(e){if("root"===e)return;let t;Oe(Te(R+e),!0),t=se.voting?"votes":se.likes?"likes":null,json={parentId:e,userId:de.user_id,votesOrLikes:t},Be(Q+"/api/widget/review/children",json,function(t){if(t.error||!t)return void qe(Te(R+e),!0);let n=[],o=!1;we?ce?n.push(...t.data):t.data.forEach(e=>{e.author_id===de.user_id?(e.isCommentAuthor=!0,n.push(e)):"active"===e.status?n.push(e):o=!0}):t.data.forEach(e=>{"active"===e.status?n.push(e):o=!0});let i=it(n),a=Te(A+e);if(i&&xe(a,i),o){let e=he("span");_e(e,"no-replies-span"),fe&&Le(e),e.innerHTML="<em>Some comments have been filtered<em>",xe(a,e)}qe(Te(R+e),!0)})},e.likeRequest=function(e){let t=e[0],n=e[1],o=e[2],i=Te(G+t),a=Te(J+t);n?(_e(i,"like-active"),a.innerText=Pe(parseInt(a.innerText)+1)):(Ce(i,"like-active"),a.innerText=Pe(parseInt(a.innerText)-1));var r={user_id:de.user_id,comment_id:t,page_id:re,liked:n,likeId:o};Be(Q+"/api/widget/review/like",r,function(e){if(e.error)return;Qe();let o=e.data[0].id;i=ze(i,t,n,o)})},e.voteComment=function(e){let t=e[0],n=e[1][0],o=e[1][1],i=e[2],a=Te(P+t),r=Te($+t),l=Te(U+t);var c={user_id:de.user_id,comment_id:t,page_id:re,vote_val:o,voteId:i};Ce(a,"vote-active"),Ce(r,"vote-active"),o>0?_e(a,"vote-active"):o<0&&_e(r,"vote-active"),l.innerText=Pe(parseInt(l.innerText)+o-n),Be(Q+"/api/widget/review/vote",c,function(e){if(e.error)return;Qe(),i=e.data[0].id;let n=Ye(a,r,t,o,i);a=n[0],r=n[1]})},e.pageReact=function(t){if(!we)return void e.loginBoxShow(id=null);let n,o=Te(w),i=Te(f),a=Te(h),r=Te(_),l=Te(b),c=Te(y),d=Te(k),s=Te(x),u=Te(T),p=Te(j),m=Te(C),v=Te(L);if(ye(o,i,a,r,l,c,"emoji-active"),"remove"==(n=oe?oe===t?"remove":"change":"new")||"change"==n){switch(oe){case"like":ue.like_count=ue.like_count-1,d.innerText=Pe(ue.like_count);break;case"love":ue.love_count=ue.love_count-1,s.innerText=Pe(ue.love_count);break;case"laugh":ue.laugh_count=ue.laugh_count-1,u.innerText=Pe(ue.laugh_count);break;case"wow":ue.wow_count=ue.wow_count-1,p.innerText=Pe(ue.wow_count);break;case"sad":ue.sad_count=ue.sad_count-1,m.innerText=Pe(ue.sad_count);break;case"angry":ue.angry_count=ue.angry_count-1,v.innerText=Pe(ue.angry_count)}oe=""}if("change"==n||"new"==n)switch(be(o,i,a,r,l,c,"emoji-unactive"),oe=t,t){case"like":Ce(o,"emoji-unactive"),_e(o,"emoji-active"),ue.like_count=ue.like_count+1,d.innerText=Pe(ue.like_count);break;case"love":Ce(i,"emoji-unactive"),_e(i,"emoji-active"),ue.love_count=ue.love_count+1,s.innerText=Pe(ue.love_count);break;case"laugh":Ce(a,"emoji-unactive"),_e(a,"emoji-active"),ue.laugh_count=ue.laugh_count+1,u.innerText=Pe(ue.laugh_count);break;case"wow":Ce(r,"emoji-unactive"),_e(r,"emoji-active"),ue.wow_count=ue.wow_count+1,p.innerText=Pe(ue.wow_count);break;case"sad":Ce(l,"emoji-unactive"),_e(l,"emoji-active"),ue.sad_count=ue.sad_count+1,m.innerText=Pe(ue.sad_count);break;case"angry":Ce(c,"emoji-unactive"),_e(c,"emoji-active"),ue.angry_count=ue.angry_count+1,v.innerText=Pe(ue.angry_count)}else ye(o,i,a,r,l,c,"emoji-unactive");if(ue.like_count>0&&Ne(d,"style","display: block"),ue.love_count>0&&Ne(s,"style","display: block"),ue.laugh_count>0&&Ne(u,"style","display: block"),ue.wow_count>0&&Ne(p,"style","display: block"),ue.sad_count>0&&Ne(m,"style","display: block"),ue.angry_count>0&&Ne(v,"style","display: block"),!de.user_id)return;let g={reaction:t,page_id:re,user_id:de.user_id,action:n};Be(Q+"/api/widget/emojiReactions",g,function(e){e.error})},e.popupRender=function(t){let n=Te(m),o=he("div"),i=he("div"),a=he("span"),r=he("div"),l=he("div"),c=he("div"),d=he("div");if(a.innerHTML="&times;",_e(o,"modal-area"),_e(a,"modal-close"),_e(i,"login-modal-content"),_e(r,"modal-header"),_e(l,"modal-body"),_e(d,"social-login-container"),_e(c,"modal-footer"),Se(a,e.loginBoxClose),ke(r,a),pe.google){let t=he("button"),n=he("span"),o=he("span");_e(n,"google-logo"),o.innerText="Google",_e(t,"login-button-google"),Se(t,e.socialAuth,{provider:"google"}),ke(t,n),ke(t,o),ke(d,t)}if(pe.facebook){let t=he("button"),n=he("span"),o=he("span");_e(n,"facebook-logo"),o.innerText="Facebook",_e(t,"login-button-facebook"),Se(t,e.socialAuth,{provider:"facebook"}),ke(t,n),ke(t,o),ke(d,t)}if(pe.github){let t=he("button"),n=he("span"),o=he("span");_e(n,"github-logo"),o.innerText="Github",_e(t,"login-button-github"),Se(t,e.socialAuth,{provider:"github"}),ke(t,n),ke(t,o),ke(d,t)}if(ke(l,d),pe.sso){let t=he("button");t.id="crowdpanel-reviews-login-sso",t.innerText="Proceed With "+parent.location.host,_e(t,"login-button-sso"),Se(t,e.socialAuth,{provider:"sso"}),ke(l,t)}if(pe.crowdpanel){let n=he("form"),o=he("span"),i=he("a"),a=he("a"),r=he("input"),d=he("input"),s=he("button");n.id=v,r.id="crowdpanel-reviews-login-box-email",d.id="crowdpanel-reviews-login-box-password",s.id=g,s.innerHTML="Login",o.innerHTML="Don't have an account?",a.innerHTML="Forgot Password",i.innerHTML="Sign up",_e(s,"login-button-crowdpanel"),Ne(r,"type","email"),Ne(r,"placeholder","Email"),r.required=!0,Ne(d,"type","password"),Ne(d,"placeholder","Password"),d.required=!0,Ne(s,"type","submit"),Ne(a,"href","https://dashboard.crowdpanel.co/forgot-password"),Ne(i,"href","https://dashboard.crowdpanel.co/signup"),Ne(i,"target","_blank"),ke(n,r),ke(n,d),ke(n,s),ke(l,n),ke(l,a),ke(c,o),ke(c,i),n.addEventListener("submit",function(n){Oe(s),n.preventDefault(),e.login(n,t)})}ke(i,r),ke(i,l),ke(i,c),ke(o,i),ke(n,o)},e.showReply=function(t){var n,o;n=Te(N+t),o=Fe(t),n.parentNode.insertBefore(o,n.nextSibling);let i=Te(q+t);i.innerText="Cancel",Se(i=Me(i),e.collapseReply,t)},e.collapseReply=function(t){let n=Te(q+t);Te(a+t).remove(),n.innerText="Reply",Se(n=Me(n),e.showReply,t)},e.login=function(t,n){!function(t,n,o){let i={email:t,password:n,pageId:re};Te(v).reset(),Be(Q+"/api/widget/login",i,function(t){if(t.error||0===t.length)return qe(Te(g)),void Ke(t.error.message);qe(Te(g)),e.loginBoxClose(),Qe(),we=!0,Ae(t[0].user_id),de=t[0],nt(function(){De(function(){Ze(function(){Ge(ee)})})})})}(t.target[0].value,t.target[1].value)},e.logout=function(){t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",we=!1,de={},userVoted={},je(Te(c)),ke(Te(l),tt()),Te(n).innerHTML="",ee.length=0,te.length=0,se={},ce=!1,we=!1,ue={},pe={},de={},oe=null,le=0,me=0,ve=0,ge={},e.main(void 0)},e.loginBoxClose=function(){let e=Te(o),t=Te(m);Ce(e,"blurred"),Ne(t,"style","display: none")},e.loginBoxShow=function(t){let n=Te(o),i=Te(m);e.popupRender(t),_e(n,"blurred"),Ne(i,"style",""),window.location.hash=m},e.main=function(t){null!==(K=Te(n))?(function(){let e=he("div");e.id=m,ke(K,e)}(),function(){let e=he("div");e.id=i,_e(e,"error-container"),Ne(e,"style","display: none;"),ke(K,e)}(),function(){let e=he("div");e.id=o,_e(e,"main-area"),fe&&Le(e),Ne(e,"style","display: none"),ke(K,e)}(),rt("https://cdn.jsdelivr.net/gh/crowdpanel/widgets/css/reviews.min.css",at),function(e){let t=Re();if(!t)return we=!1,void He(e);Be(Q+"/api/widget/self",{userToken:t},function(t){!t.error&&t?(we=!0,de=t.data,He(e)):He(e)})}(function(){De(function(){!function(t){let n=Te(o);ke(n,function(){let t=he("div"),n=he("div");return t.id="crowdpanel-reviews-head-container",n.id=l,se.emojis&&ke(t,function(){let t=he("div"),n=he("div"),o=he("div"),i=he("div"),a=he("div"),r=he("div"),l=he("div"),c=he("div"),d=he("button"),s=he("button"),u=he("button"),p=he("button"),m=he("button"),v=he("button"),g=he("span"),M=he("span"),S=he("span"),N=he("span"),E=he("span"),R=he("span"),A=he("span"),B=he("span"),H=he("span"),D=he("span"),F=he("span"),I=he("span");return A.innerText="Like",B.innerText="Love",H.innerText="Funny",D.innerText="Wow",F.innerText="Sad",I.innerText="Angry",d.id=w,u.id=f,p.id=h,s.id=_,m.id=b,v.id=y,g.id=k,S.id=x,N.id=T,M.id=j,E.id=C,R.id=L,Se(d,e.pageReact,"like"),Se(u,e.pageReact,"love"),Se(p,e.pageReact,"laugh"),Se(s,e.pageReact,"wow"),Se(m,e.pageReact,"sad"),Se(v,e.pageReact,"angry"),be(A,B,H,D,F,I,"tooltip-text"),_e(n,"emojis-container"),be(o,a,r,i,l,c,"emoji-container"),_e(d,"emoji-like"),_e(u,"emoji-love"),_e(p,"emoji-laugh"),_e(s,"emoji-wow"),_e(m,"emoji-sad"),_e(v,"emoji-angry"),be(g,S,N,M,E,R,"emoji-count"),g.innerText=Pe(ue.like_count),S.innerText=Pe(ue.love_count),N.innerText=Pe(ue.laugh_count),M.innerText=Pe(ue.wow_count),E.innerText=Pe(ue.sad_count),R.innerText=Pe(ue.angry_count),ue.like_count<1&&Ne(g,"style","display: none"),ue.love_count<1&&Ne(S,"style","display: none"),ue.laugh_count<1&&Ne(N,"style","display: none"),ue.wow_count<1&&Ne(M,"style","display: none"),ue.sad_count<1&&Ne(E,"style","display: none"),ue.angry_count<1&&Ne(R,"style","display: none"),ke(o,d),ke(o,g),ke(d,A),ke(a,u),ke(a,S),ke(u,B),ke(r,p),ke(r,N),ke(p,H),ke(i,s),ke(i,M),ke(s,D),ke(l,m),ke(l,E),ke(m,F),ke(c,v),ke(c,R),ke(v,I),function(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{n.appendChild(e)})}}(o,a,r,i,l,c,n),ke(t,n),t}()),ke(t,n),we&&0!==Object.keys(de).length?ke(t,et()):ke(t,tt()),ke(t,Fe("root")),ke(t,function(){let e=he("div"),t=he("div"),n=he("div"),o=he("span"),i=he("span"),a=he("span");o.innerText=ve,i.innerText="Stars",a.innerText=`(${Pe(me)} votes)`,_e(o,"ratings-count"),_e(i,"ratings-text"),_e(a,"ratings-votes"),_e(n,"ratings-star"),_e(e,"ratings-container"),_e(t,"ratings-count-container-total"),ke(t,n),ke(t,o),ke(t,i),ke(t,a),ke(e,t);for(const t in ge)ke(e,Ie(t,ge[t]));return e}()),ee.length>0&&ke(t,function(){let e=he("div"),t=he("div"),n=he("div"),o=he("hr"),i=he("span"),a=he("span"),r=he("select");_e(e,"page-selection-container"),_e(n,"page-comments-container"),_e(a,"page-count-span"),_e(i,"page-numeral-span"),_e(t,"page-actions-container"),Ne(a,"style","margin-left: 4px"),i.innerText=le,1==ee.length?a.innerText="comment":a.innerText="comments",r.id="crowdpanel-reviews-select-order",fe&&(Le(r),Le(a),Le(i));let l=he("option"),c=he("option"),d=he("option"),s=he("option"),u=he("option");return l.id="newest",c.id="oldest",d.id="top-rated",s.id="least-rated",u.id="top",l.textContent="Newest",c.textContent="Oldest",d.textContent="Top Rated",s.textContent="Least Rated",u.textContent="Top",r.addEventListener("change",function(e){!function(e){let t=[];"Top"===e?t=se.voting?ee.sort((e,t)=>Number(t.vote_count)-Number(e.vote_count)):se.likes?ee.sort((e,t)=>Number(t.like_count)-Number(e.like_count)):[...ee]:"Top Rated"===e?t=ee.sort((e,t)=>Number(t.rating)-Number(e.rating)):"Least Rated"===e?t=ee.sort((e,t)=>Number(e.rating)-Number(t.rating)):"Oldest"===e?t=ee.sort((e,t)=>Number(e.id)-Number(t.id)):"Newest"===e&&(t=ee.sort((e,t)=>Number(t.id)-Number(e.id))),Ge(t)}(e.target.value)}),ke(n,i),ke(n,a),ke(r,l),ke(r,c),ke(r,d),ke(r,s),ke(r,u),ke(t,n),ke(t,r),ke(e,t),ke(e,o),e}()),t}()),ke(n,function(){let e=he("div"),t=he("div");e.id="crowdpanel-reviews-main-comments-area",t.id=M,_e(t,"comment-area");let n=it(ee);return n&&ke(t,n),ke(e,t),e}()),ke(n,function(){let e=he("div");e.id="crowdpanel-reviews-footer-area";let t=he("hr"),n=he("div"),o=he("a"),i=he("a");return fe&&Le(i),_e(n,"footer-container"),_e(o,"icon-button-markdown"),i.innerHTML="Powered by Crowdpanel",Ne(i,"href","https://crowdpanel.co"),Ne(i,"target","_blank"),Ne(o,"href","https://docs.crowdpanel.co/#/markdown"),Ne(o,"target","_blank"),ke(e,t),ke(n,o),ke(n,i),ke(e,n),e}()),He(function(){Ze(function(){lt()})})}()})})):console.log("Please embed the 'crowdpanel-reviews' div onto your webpage")};let ct=!1;function dt(){ct||(ct=!0,function(){for(var e=t.getElementsByTagName("script"),n=0;n<e.length;n++)e[n].src.match(/\/crowdpanel-reviews\.js$/)&&("dark"===e[n].dataset.theme&&(fe=!0),e[n].dataset.customCss&&(ne=e[n].dataset.customCss))}(),e.main(void 0))}let st=function(){let e=t.readyState;"loading"===e?t.addEventListener("readystatechange",st):"interactive"===e?dt():"complete"===e&&dt()};st()}(window,document);
