!function(e,t){let n="crowdpanel-comments",o="crowdpanel-comments-main-area",i="crowdpanel-comments-error-area",a="crowdpanel-comments-head-container",r="crowdpanel-comments-textarea-container-",l="crowdpanel-comments-textarea-",c="crowdpanel-comments-logging-container",d="crowdpanel-comments-logged-in-container",u="crowdpanel-comments-logged-out-container",s="crowdpanel-comments-login-button",m="crowdpanel-comments-logout-button",p="crowdpanel-comments-submit-comment-button-",g="crowdpanel-comments-select-order",v="crowdpanel-comments-anon-name-",f="crowdpanel-comments-login-modal",h="crowdpanel-comments-login-form",w="crowdpanel-comments-login-submit",_="crowdpanel-comments-emoji-like",b="crowdpanel-comments-emoji-love",y="crowdpanel-comments-emoji-laugh",k="crowdpanel-comments-emoji-wow",x="crowdpanel-comments-emoji-sad",T="crowdpanel-comments-emoji-angry",j="crowdpanel-comments-emoji-like-count",C="crowdpanel-comments-emoji-love-count",L="crowdpanel-comments-emoji-laugh-count",M="crowdpanel-comments-emoji-wow-count",S="crowdpanel-comments-emoji-sad-count",E="crowdpanel-comments-emoji-angry-count",A="crowdpanel-comments-main-comments-area",N="crowdpanel-comments-comment-area",R="crowdpanel-comments-comment-total-container-",B="crowdpanel-comments-comment-",H="crowdpanel-comments-comment-count-container-",D="crowdpanel-comments-comment-toggle-",I="crowdpanel-comments-comment-child-area-",O="crowdpanel-comments-comment-border-",F="crowdpanel-comments-comment-menu-",q="crowdpanel-comments-comment-menu-btn-",P="crowdpanel-comments-comment-approve-btn-",G="crowdpanel-comments-author-avatar",U="crowdpanel-comments-comment-badge-",$="crowdpanel-comments-reply-",J="crowdpanel-comments-upvote-",W="crowdpanel-comments-downvote-",V="crowdpanel-comments-like-",X="crowdpanel-comments-vote-count-",z="crowdpanel-comments-like-count-",K="crowdpanel-comments-footer-area",Q=null;const Y="https://server.crowdpanel.co",Z=[],ee=[];let te,ne,oe,ie,ae,re=0,le=!1,ce=!1,de=null,ue={},se={},me={},pe={},ge=!1,ve=!1;function fe(e){return t.createElement(e)}function he(e,t){e.classList.add("crowdpanel-comments-"+t)}function we(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.add("crowdpanel-comments-"+n)})}}function _e(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.remove("crowdpanel-comments-"+n)})}}function be(e,t){e.appendChild(t)}function ye(e,t){e.prepend(t)}function ke(e){return t.getElementById(e)}function xe(e){null!==e&&e.parentNode.removeChild(e)}function Te(e,t){null!==e&&e.classList.remove("crowdpanel-comments-"+t)}function je(e){e.classList.add("crowdpanel-comments-dark")}function Ce(e){if(null!==e){let t=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(t,e),t}return e}function Le(e,t,n){e.addEventListener("click",function(){t(n)},!1)}function Me(e,t,n){e.setAttribute(t,n)}function Se(e,t,n){e.removeAttribute(t,n)}function Ee(){let e=("; "+t.cookie).split("; crowdpanel-widget-token=");if(2===e.length)return e.pop().split(";").shift()}function Ae(e){let n="",o=new Date;o.setTime(o.getTime()+2592e6),n="; expires="+o.toUTCString(),t.cookie="crowdpanel-widget-token="+e+n+"; path=/"}function Ne(e,t,n){let o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){n(JSON.parse(o.response))},o.send(JSON.stringify(t))}function Re(e){"function"==typeof e&&e()}function Be(e){Z.length=0;let n={domain:parent.location.host,path:parent.location.pathname,title:t.title,userId:ue.user_id};Ne(Y+"/api/widget/comment/main",n,function(t){if(t.error)return void Xe(t.error.message);ze(),ae=t.data[0].domain_id,ie=t.data[0].page_id,ee.push(...t.data[0].moderators);let n=t.data.slice(1);re=t.data[0].comment_count||0,ge?ee.indexOf(ue.email)>-1?(le=!0,Z.push(...n)):n&&n.forEach(e=>{e.author_id===ue.user_id?(e.isCommentAuthor=!0,Z.push(e)):"active"===e.status&&Z.push(e)}):n.forEach(e=>{"active"===e.status&&Z.push(e)}),ne=t.data[0].reaction,ce=t.data[0].anonymous&&!ge,se={self_moderate:t.data[0].self_moderate,likes:t.data[0].likes,voting:t.data[0].voting,emojis:t.data[0].emojis,time_stamp:t.data[0].time_stamp,emails:t.data[0].moderator_emails,anon:t.data[0].anonymous},me={google:t.data[0].google,facebook:t.data[0].facebook,github:t.data[0].github,crowdpanel:t.data[0].crowdpanel,sso:t.data[0].sso},pe={like_count:t.data[0].thumbs_up_count,love_count:t.data[0].love_count,laugh_count:t.data[0].laugh_count,wow_count:t.data[0].wow_count,sad_count:t.data[0].sad_count,angry_count:t.data[0].angry_count},Re(e)})}function He(e){let t=fe("div"),n=fe("div"),o=fe("textarea"),i=fe("button"),a=fe("div");if(t.id=r+e,n.id=d,o.id=l+e,i.id=p+e,he(t,"textarea-container"),he(o,"textarea"),he(a,"anon-container"),ve&&je(o),he(i,"submit-button"),0==Z.length&&"root"==e?Me(o,"placeholder","Be the first to comment"):Me(o,"placeholder","Add a comment"),"root"!==e&&Me(t,"style","padding-left: 40px"),i.innerText="COMMENT",o.oninput=function(e,t){return function(){if(e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px",ce){let n=ke(v+t);e.value.length>0?(Se(n,"style","display: none"),Me(n,"style","display: block")):(Se(n,"style","display: block"),Me(n,"style","display: none"))}}}(o,e),Le(i,Pe,e),ce){let t=fe("input");Me(t,"type","text"),Me(t,"placeholder","Name"),t.required=!0,t.id=v+e,he(t,"anon-input"),Me(t,"style","display: none"),be(a,t)}return be(t,n),be(t,o),be(a,i),be(t,a),t}function De(e,t){t?(Me(e,"style","border: none"),he(e,"toggle--loading")):(Me(e,"style","color: transparent"),he(e,"button--loading"))}function Ie(e,t){t?(Se(e,"style","border: none"),Te(e,"toggle--loading")):(Me(e,"style","color: white"),Te(e,"button--loading"))}function Oe(e){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}function Fe(e){const t=["#D83B01","#B50E0E","#E81123","#B4009E","#5C2D91","#0078D7","#00B4FF","#008272","#107C10","#FFB900"];if(!e)return t[0];let n=0;for(let t=0;t<e.length;t++)n+=e.charCodeAt(t);return t[n%t.length]}function qe(e){let t=ke(N);t.innerHTML="";let n=tt(e,"root");n&&be(t,n)}function Pe(t){De(ke(p+t)),ge?e.newComment(t,Ee()):ce?e.newAnonComment(t):(Ie(ke(p+t)),e.loginBoxShow(t))}function Ge(e){ke(F+e).classList.toggle("crowdpanel-comments-dropdown-opened")}function Ue(t){let n=ke(H+t),o=ke(D+t),i=ke(O+t);Te(o,"comments-toggle-up"),he(o,"comments-toggle-down"),Me(i,"style","display: block"),e.loadChildren(t),Le(n=Ce(n),$e,t)}function $e(e){let t=ke(H+e),n=ke(D+e),o=ke(I+e),i=ke(O+e);Te(n,"comments-toggle-down"),he(n,"comments-toggle-up"),Me(i,"style","display: none"),Me(o,"style","display: none"),Le(t=Ce(t),Je,e)}function Je(e){let t=ke(H+e),n=ke(D+e),o=ke(I+e),i=ke(O+e);Te(n,"comments-toggle-up"),he(n,"comments-toggle-down"),Me(i,"style","display: block"),Se(o,"style","display: none"),Le(t=Ce(t),$e,e)}function We(t,n,o,i,a){return t=Ce(t),n=Ce(n),i>0?(Le(t,e.voteComment,[o,[1,0],a]),Le(n,e.voteComment,[o,[1,-1],a])):i<0?(Le(t,e.voteComment,[o,[-1,1],a]),Le(n,e.voteComment,[o,[-1,0],a])):(Le(t,e.voteComment,[o,[0,1],a]),Le(n,e.voteComment,[o,[0,-1],a])),[t,n]}function Ve(t,n,o,i){return Le(t=Ce(t),e.likeRequest,[n,!o,i]),t}function Xe(e){let t=ke(i);t.innerText=e,Me(t,"style","display: block;")}function ze(){Me(ke(i),"style","display: none;")}function Ke(e){if(ne){let e=ke(_),t=ke(b),n=ke(y),o=ke(k),i=ke(x),a=ke(T);switch(we(e,t,n,o,i,a,"emoji-unactive"),ne){case"like":Te(e,"emoji-unactive"),he(e,"emoji-active");break;case"love":Te(t,"emoji-unactive"),he(t,"emoji-active");break;case"laugh":Te(n,"emoji-unactive"),he(n,"emoji-active");break;case"wow":Te(o,"emoji-unactive"),he(o,"emoji-active");break;case"sad":Te(i,"emoji-unactive"),he(i,"emoji-active");break;case"angry":Te(a,"emoji-unactive"),he(a,"emoji-active")}}Re(e)}function Qe(){let t,n=fe("div"),o=fe("div"),i=fe("span");i.innerText=ue.full_name;let a=fe("button");return n.id=d,a.id=m,he(a,"button"),he(n,"logging-container"),he(o,"logging-container-left-div"),ve&&(je(a),je(o)),a.innerText="Logout",Le(a,e.logout,null),ue.avatar_url?((t=fe("img")).src=ue.avatar_url,he(t,"author-avatar-img")):((t=fe("div")).style.background=Fe(ue.full_name),t.innerHTML=ue.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),he(t,"author-avatar-alpha")),ce=!1,be(o,t),be(o,i),be(n,a),be(n,o),n}function Ye(){let t=fe("div"),n=fe("button");return t.id=u,n.id=s,he(n,"button"),ve&&je(n),he(t,"logging-container"),n.innerText="Login",Le(n,e.loginBoxShow,null),ce=se.anon,be(t,n),t}function Ze(e){xe(ke(u)),be(ke(c),Qe()),Re(e)}function et(t,n,o){let i=fe("div"),a=fe("button"),r=fe("div");if(a.id=q+t,r.id=F+t,he(a,"icon-button-menu"),he(i,"dropdown"),ve&&je(a),he(r,"dropdown-content"),Le(a,Ge,t),le&&("flagged"===n||"pending"===n)){let n=fe("span");n.id=P+t,n.innerText="Approve",Le(n,e.approveComment,t),be(r,n)}if(le||o){let n=fe("span");n.innerText="Delete",Le(n,e.deleteComment,t),be(r,n)}return be(i,a),be(i,r),i}function tt(t,n){let o=fe("div"),i=new Date;return t.forEach(function(t){let n,a=new Date(t.created_at),r=fe("div"),l=fe("div"),c=fe("div"),d=fe("div"),u=fe("div"),s=fe("div"),m=fe("div"),p=fe("div"),g=fe("div"),v=fe("span"),f=fe("div"),h=fe("div"),w=fe("div"),_=fe("div"),b=fe("div"),y=fe("div"),k=fe("span"),x=fe("span"),T=fe("span");l.id=B+t.id,g.id=I+t.id,r.id=R+t.id,h.id=D+t.id,y.id=H+t.id,u.id=O+t.id,he(r,"total-container"),he(l,"comment-container"),he(g,"comment-child-container"),he(c,"comment-left"),he(d,"comment-right"),he(s,"comment-head"),he(m,"comment-body"),he(p,"comment-footer"),he(u,"comment-border"),he(f,"comment-toggle-container"),he(x,"comment-date"),he(k,"author-name"),ve&&(je(m),je(x),je(k),je(v),je(T)),he(v,"reply-button"),he(h,"comments-toggle"),he(h,"comments-toggle-up"),he(T,"comment-reply-count"),he(w,"author-name-container"),he(_,"comment-head-left-container"),he(b,"footer-actions-container"),he(y,"comment-count-container"),m.innerHTML=t.comment_text,k.innerText=t.full_name;let j=ee.indexOf(t.email)>-1;if(x.innerHTML=function(e,t){let n=e-t;return n<15e3?"just now":n<12e4?Math.round(n/1e3)+" seconds ago":n<72e5?Math.round(n/6e4)+" minutes ago":n<1728e5?Math.round(n/36e5)+" hours ago":n<5184e6?Math.round(n/864e5)+" days ago":n<62208e6?Math.round(n/2592e6)+" months ago":Math.round(n/31104e6)+" years ago"}(i,a),x.title=a,v.id=$+t.id,v.innerHTML="Reply",T.innerHTML=t.children_count,Le(v,e.showReply,t.id),Le(y,Ue,t.id),t.avatar_url?((n=fe("img")).src=t.avatar_url,he(n,"author-avatar-img")):((n=fe("div")).style.background=Fe(t.full_name),n.innerHTML=t.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()||"?",he(n,"author-avatar-alpha")),n.id=G,be(c,n),be(w,k),(j||"active"!==t.status)&&be(w,function(e,t,n){let o=fe("span");return he(o,"comment-badge"),o.id=U+e,n?he(o,"comment-badge-moderator"):"flagged"===t?(he(o,"comment-badge-flagged"),o.innerHTML="FLAGGED"):"pending"===t&&(he(o,"comment-badge-pending"),o.innerHTML="PENDING"),o}(t.id,t.status,j)),be(_,w),se.time_stamp&&be(_,x),be(s,_),ge?le?be(s,et(t.id,t.status,t.isCommentAuthor)):t.isCommentAuthor&&be(s,et(t.id,t.status,t.isCommentAuthor)):ce&&t.isCommentAuthor&&be(s,et(t.id,t.status,t.isCommentAuthor)),se.voting){let n=fe("button"),o=fe("button"),i=fe("div"),a=fe("span");if(n.id=J+t.id,o.id=W+t.id,a.id=X+t.id,ge){t.vote_value>0?he(n,"vote-active"):t.vote_value<0&&he(o,"vote-active");let e=We(n,o,t.id,t.vote_value,t.like_id);n=e[0],o=e[1]}else Le(n,e.loginBoxShow,null),Le(o,e.loginBoxShow,null);he(n,"icon-button-upvote"),he(o,"icon-button-downvote"),he(a,"numeral-span"),ve&&je(a),he(i,"footer-voting-container"),a.innerText=Oe(t.vote_count),be(i,n),be(i,a),be(i,o),be(b,i)}else if(se.likes){let n=fe("button"),o=fe("div"),i=fe("span");n.id=V+t.id,i.id=z+t.id,ge?(t.liked&&he(n,"like-active"),n=Ve(n,t.id,t.liked,t.like_id)):Le(n,e.loginBoxShow,null),he(n,"icon-button-like"),he(i,"numeral-span"),ve&&(je(n),je(i)),he(o,"footer-likes-container"),i.innerText=Oe(t.like_count),be(o,n),be(o,i),be(b,o)}be(p,v),be(p,b),be(d,s),be(d,m),be(d,p),be(l,c),be(l,d),be(y,T),be(f,h),be(y,f),t.children_count>0&&be(r,y),be(r,u),be(r,l),be(r,g),be(o,r)}),o}function nt(){void 0===te?it():ot(te,it)}function ot(e,n){let o=t.getElementsByTagName("HEAD")[0],i=fe("link");i.rel="stylesheet",i.type="text/css",i.href=e,function(e,t,n){e.addEventListener("load",function(){t(n)})}(i,n),be(o,i)}function it(){Me(ke(o),"style","")}e.socialAuth=function(t){let n={provider:t.provider,domainId:ae},o=window.open("","_blank");Ne(Y+"/api/widget/oauth",n,function(e){o.location=e.data,oe=e.token});var i=setInterval(function(){o.closed&&(clearInterval(i),Ne(Y+"/api/widget/authlogin",{sessionToken:oe},function(t){if(t.error)return Xe(t.error.message),void(ge=!1);e.loginBoxClose(),ze(),ge=!0,Ae(t[0].user_id),ue=t[0],Ze(function(){Be(function(){Ke(function(){qe(Z)})})})}))},250)},e.newAnonComment=function(t){let n=ke(l+t),o=n.value,i=ke(v+t);if(""===o)return he(n,"red-border"),void Ie(ke(p+t));if(ce&&""===i.value)return he(i,"red-border"),void Ie(ke(p+t));Te(n,"red-border"),Te(i,"red-border");let a=se.self_moderate?"pending":"active";const r="root"===t?null:t;let c={full_name:i.value,status:a,page_id:ie,parent_id:r,comment_text:o,created_at:new Date};Ne(Y+"/api/widget/comment/anon",c,function(o){if(o.error||!o)return void Ie(ke(p+t));n.value="",i.value="",Se(i,"style","display: block"),Me(i,"style","display: none"),Ie(ke(p+t)),"root"!==t&&e.collapseReply(t);let r=tt([{id:o.data[0].id,full_name:c.full_name,avatar_url:null,author_id:o.data[0].author_id,page_id:o.data[0].page_id,comment_text:o.data[0].comment_text,status:a,parent_id:o.data[0].parent_id,vote_count:0,like_count:0,created_at:c.created_at,isCommentAuthor:!0}],t);if("root"!==t){ye(ke(I+t),r)}else{ye(ke(N),r)}})},e.newComment=function(t,n){let o=ke(l+t),i=o.value;if(""===i)return he(o,"red-border"),void Ie(ke(p+t));Te(o,"red-border");let a="pending";se.self_moderate?le&&(a="active"):a="active";const r="root"===t?null:t;let c={author_id:n,status:a,full_name:ue.full_name,email:ue.email,page_id:ie,parent_id:r,comment_text:i,created_at:new Date};Ne(Y+"/api/widget/comment/new",c,function(n){if(n.error||!n)return void Ie(ke(p+t));o.value="",Ie(ke(p+t)),"root"!==t&&e.collapseReply(t);let i=tt([{id:n.data[0].id,full_name:ue.full_name,avatar_url:ue.avatar_url,author_id:n.data[0].author_id,page_id:n.data[0].page_id,comment_text:n.data[0].comment_text,status:a,parent_id:n.data[0].parent_id,vote_count:0,like_count:0,created_at:c.created_at,isCommentAuthor:!0}],t);if("root"!==t){ye(ke(I+t),i)}else{ye(ke(N),i)}})},e.deleteComment=function(e){if(le&&Ge(e),!confirm("Are you sure you want to delete this comment?"))return;let t={id:e,user_id:ue.user_id};Ne(Y+"/api/widget/comment/remove",t,function(t){if(t.error||!t)return;let n=ke(R+e);"deleted"===t.data[0].status&&Me(n,"style","display: none")})},e.approveComment=function(e){if(Ge(e),!le)return;let t={id:e,user_id:ue.user_id};Ne(Y+"/api/widget/comment/approve",t,function(t){if(!t.error&&t&&"active"===t.data[0].status){let t=ke(U+e),n=ke(P+e);Me(t,"style","display: none"),Me(n,"style","display: none")}})},e.loadChildren=function(e){if("root"===e)return;let t;De(ke(D+e),!0),t=se.voting?"votes":se.likes?"likes":null,json={parentId:e,userId:ue.user_id,votesOrLikes:t},Ne(Y+"/api/widget/comment/children",json,function(t){if(t.error||!t)return void Ie(ke(D+e),!0);let n=[],o=!1;ge?le?n.push(...t.data):t.data.forEach(e=>{e.author_id===ue.user_id?(e.isCommentAuthor=!0,n.push(e)):"active"===e.status?n.push(e):o=!0}):t.data.forEach(e=>{"active"===e.status?n.push(e):o=!0});let i=tt(n,e),a=ke(I+e);if(i&&ye(a,i),o){let e=fe("span");he(e,"no-replies-span"),ve&&je(e),e.innerHTML="<em>Some comments have been filtered<em>",ye(a,e)}Ie(ke(D+e),!0)})},e.likeRequest=function(e){let t=e[0],n=e[1],o=e[2],i=ke(V+t),a=ke(z+t);n?(he(i,"like-active"),a.innerText=Oe(parseInt(a.innerText)+1)):(Te(i,"like-active"),a.innerText=Oe(parseInt(a.innerText)-1));var r={user_id:ue.user_id,comment_id:t,page_id:ie,liked:n,likeId:o};Ne(Y+"/api/widget/comment/like",r,function(e){if(e.error)return;ze();let o=e.data[0].id;i=Ve(i,t,n,o)})},e.voteComment=function(e){let t=e[0],n=e[1][0],o=e[1][1],i=e[2],a=ke(J+t),r=ke(W+t),l=ke(X+t);var c={user_id:ue.user_id,comment_id:t,page_id:ie,vote_val:o,voteId:i};Te(a,"vote-active"),Te(r,"vote-active"),o>0?he(a,"vote-active"):o<0&&he(r,"vote-active"),l.innerText=Oe(parseInt(l.innerText)+o-n),Ne(Y+"/api/widget/comment/vote",c,function(e){if(e.error)return;ze(),i=e.data[0].id;let n=We(a,r,t,o,i);a=n[0],r=n[1]})},e.pageReact=function(t){if(!ge&&!ce)return void e.loginBoxShow(id=null);let n,o,i=ke(_),a=ke(b),r=ke(y),l=ke(k),c=ke(x),d=ke(T),u=ke(j),s=ke(C),m=ke(L),p=ke(M),g=ke(S),v=ke(E);if(_e(i,a,r,l,c,d,"emoji-active"),"remove"==(n=ne?ne===t?"remove":"change":"new")||"change"==n){switch(ne){case"like":pe.like_count=pe.like_count-1,u.innerText=Oe(pe.like_count);break;case"love":pe.love_count=pe.love_count-1,s.innerText=Oe(pe.love_count);break;case"laugh":pe.laugh_count=pe.laugh_count-1,m.innerText=Oe(pe.laugh_count);break;case"wow":pe.wow_count=pe.wow_count-1,p.innerText=Oe(pe.wow_count);break;case"sad":pe.sad_count=pe.sad_count-1,g.innerText=Oe(pe.sad_count);break;case"angry":pe.angry_count=pe.angry_count-1,v.innerText=Oe(pe.angry_count)}ne=""}if("change"==n||"new"==n)switch(we(i,a,r,l,c,d,"emoji-unactive"),ne=t,t){case"like":Te(i,"emoji-unactive"),he(i,"emoji-active"),pe.like_count=pe.like_count+1,u.innerText=Oe(pe.like_count);break;case"love":Te(a,"emoji-unactive"),he(a,"emoji-active"),pe.love_count=pe.love_count+1,s.innerText=Oe(pe.love_count);break;case"laugh":Te(r,"emoji-unactive"),he(r,"emoji-active"),pe.laugh_count=pe.laugh_count+1,m.innerText=Oe(pe.laugh_count);break;case"wow":Te(l,"emoji-unactive"),he(l,"emoji-active"),pe.wow_count=pe.wow_count+1,p.innerText=Oe(pe.wow_count);break;case"sad":Te(c,"emoji-unactive"),he(c,"emoji-active"),pe.sad_count=pe.sad_count+1,g.innerText=Oe(pe.sad_count);break;case"angry":Te(d,"emoji-unactive"),he(d,"emoji-active"),pe.angry_count=pe.angry_count+1,v.innerText=Oe(pe.angry_count)}else _e(i,a,r,l,c,d,"emoji-unactive");if(pe.like_count>0&&Me(u,"style","display: block"),pe.love_count>0&&Me(s,"style","display: block"),pe.laugh_count>0&&Me(m,"style","display: block"),pe.wow_count>0&&Me(p,"style","display: block"),pe.sad_count>0&&Me(g,"style","display: block"),pe.angry_count>0&&Me(v,"style","display: block"),ue.user_id)o=ue.user_id;else{if(!ce)return;o=null}Ne(Y+"/api/widget/emojireact",{reaction:t,page_id:ie,user_id:o,action:n,currentReactionId:de},function(e){e.error||(de=e.data[0].id)})},e.popupRender=function(t){let n=ke(f),o=fe("div"),i=fe("div"),a=fe("span"),r=fe("div"),l=fe("div"),c=fe("div"),d=fe("div");if(a.innerHTML="&times;",he(o,"modal-area"),he(a,"modal-close"),he(i,"login-modal-content"),he(r,"modal-header"),he(l,"modal-body"),he(d,"social-login-container"),he(c,"modal-footer"),Le(a,e.loginBoxClose),be(r,a),me.google){let t=fe("button"),n=fe("span"),o=fe("span");he(n,"google-logo"),o.innerText="Google",he(t,"login-button-google"),Le(t,e.socialAuth,{provider:"google"}),be(t,n),be(t,o),be(d,t)}if(me.facebook){let t=fe("button"),n=fe("span"),o=fe("span");he(n,"facebook-logo"),o.innerText="Facebook",he(t,"login-button-facebook"),Le(t,e.socialAuth,{provider:"facebook"}),be(t,n),be(t,o),be(d,t)}if(me.github){let t=fe("button"),n=fe("span"),o=fe("span");he(n,"github-logo"),o.innerText="Github",he(t,"login-button-github"),Le(t,e.socialAuth,{provider:"github"}),be(t,n),be(t,o),be(d,t)}if(be(l,d),me.sso){let t=fe("button");t.id=ID_LOGIN_SSO,t.innerText="Proceed With "+parent.location.host,he(t,"login-button-sso"),Le(t,e.socialAuth,{provider:"sso"}),be(l,t)}if(me.crowdpanel){let n=fe("form"),o=fe("span"),i=fe("a"),a=fe("a"),r=fe("input"),d=fe("input"),u=fe("button");n.id=h,r.id="crowdpanel-comments-login-box-email",d.id="crowdpanel-comments-login-box-password",u.id=w,u.innerHTML="Login",o.innerHTML="Don't have an account?",a.innerHTML="Forgot Password",i.innerHTML="Sign up",he(u,"login-button-crowdpanel"),Me(r,"type","email"),Me(r,"placeholder","Email"),r.required=!0,Me(d,"type","password"),Me(d,"placeholder","Password"),d.required=!0,Me(u,"type","submit"),Me(a,"href","https://dashboard.crowdpanel.co/forgot-password"),Me(i,"href","https://dashboard.crowdpanel.co/signup"),Me(i,"target","_blank"),be(n,r),be(n,d),be(n,u),be(l,n),be(l,a),be(c,o),be(c,i),n.addEventListener("submit",function(n){De(u),n.preventDefault(),e.login(n,t)})}be(i,r),be(i,l),be(i,c),be(o,i),be(n,o)},e.showReply=function(t){let n=ke(B+t);var o,i;o=n,i=He(t),o.parentNode.insertBefore(i,o.nextSibling);let a=ke($+t);a.innerText="Cancel",Le(a=Ce(a),e.collapseReply,t)},e.collapseReply=function(t){let n=ke($+t);ke(r+t).remove(),n.innerText="Reply",Le(n=Ce(n),e.showReply,t)},e.login=function(t,n){!function(t,n,o){let i={email:t,password:n,pageId:ie};ke(h).reset(),Ne(Y+"/api/widget/login",i,function(t){if(t.error||0===t.length)return Ie(ke(w)),void Xe(t.error.message);Ie(ke(w)),e.loginBoxClose(),ze(),ge=!0,Ae(t[0].user_id),ue=t[0],Ze(function(){Be(function(){Ke(function(){qe(Z)})})})})}(t.target[0].value,t.target[1].value)},e.logout=function(){var o;t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",ge=!1,ue={},userVoted={},xe(ke(d)),be(ke(c),Ye()),ke(n).innerHTML="",Z.length=0,ee.length=0,le=!1,ce=!1,ge=!1,me={},pe={},ue={},ne=null,de=null,re=0,e.main(o)},e.loginBoxClose=function(){let e=ke(o),t=ke(f);Te(e,"blurred"),Me(t,"style","display: none")},e.loginBoxShow=function(t){let n=ke(o),i=ke(f);e.popupRender(t),he(n,"blurred"),Me(i,"style",""),window.location.hash=f},e.main=function(t){null!==(Q=ke(n))?(function(){let e=fe("div");e.id=f,be(Q,e)}(),function(){let e=fe("div");e.id=i,he(e,"error-container"),Me(e,"style","display: none;"),be(Q,e)}(),function(){let e=fe("div");e.id=o,he(e,"main-area"),ve&&je(e);Me(e,"style","display: none"),be(Q,e)}(),ot("https://cdn.jsdelivr.net/gh/crowdpanel/widgets/css/comments.min.css",nt),function(e){let t=Ee();if(!t)return ge=!1,void Re(e);Ne(Y+"/api/widget/self",{userToken:t},function(t){!t.error&&t?(ge=!0,ue=t.data,Re(e)):Re(e)})}(function(){Be(function(){!function(t){let n=ke(o);be(n,function(){let t=fe("div"),n=fe("div");t.id=a,n.id=c,se.emojis&&be(t,function(){let t=fe("div"),n=fe("div"),o=fe("div"),i=fe("div"),a=fe("div"),r=fe("div"),l=fe("div"),c=fe("div"),d=fe("button"),u=fe("button"),s=fe("button"),m=fe("button"),p=fe("button"),g=fe("button"),v=fe("span"),f=fe("span"),h=fe("span"),w=fe("span"),A=fe("span"),N=fe("span"),R=fe("span"),B=fe("span"),H=fe("span"),D=fe("span"),I=fe("span"),O=fe("span");R.innerText="Like",B.innerText="Love",H.innerText="Funny",D.innerText="Wow",I.innerText="Sad",O.innerText="Angry",d.id=_,s.id=b,m.id=y,u.id=k,p.id=x,g.id=T,v.id=j,h.id=C,w.id=L,f.id=M,A.id=S,N.id=E,Le(d,e.pageReact,"like"),Le(s,e.pageReact,"love"),Le(m,e.pageReact,"laugh"),Le(u,e.pageReact,"wow"),Le(p,e.pageReact,"sad"),Le(g,e.pageReact,"angry"),we(R,B,H,D,I,O,"tooltip-text"),he(n,"emojis-container"),we(o,a,r,i,l,c,"emoji-container"),he(d,"emoji-like"),he(s,"emoji-love"),he(m,"emoji-laugh"),he(u,"emoji-wow"),he(p,"emoji-sad"),he(g,"emoji-angry"),we(v,h,w,f,A,N,"emoji-count"),v.innerText=Oe(pe.like_count),h.innerText=Oe(pe.love_count),w.innerText=Oe(pe.laugh_count),f.innerText=Oe(pe.wow_count),A.innerText=Oe(pe.sad_count),N.innerText=Oe(pe.angry_count),pe.like_count<1&&Me(v,"style","display: none");pe.love_count<1&&Me(h,"style","display: none");pe.laugh_count<1&&Me(w,"style","display: none");pe.wow_count<1&&Me(f,"style","display: none");pe.sad_count<1&&Me(A,"style","display: none");pe.angry_count<1&&Me(N,"style","display: none");return be(o,d),be(o,v),be(d,R),be(a,s),be(a,h),be(s,B),be(r,m),be(r,w),be(m,H),be(i,u),be(i,f),be(u,D),be(l,p),be(l,A),be(p,I),be(c,g),be(c,N),be(g,O),function(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{n.appendChild(e)})}}(o,a,r,i,l,c,n),be(t,n),t}());be(t,n),ge&&0!==Object.keys(ue).length?be(t,Qe()):be(t,Ye());be(t,He("root")),Z.length>0&&be(t,function(){let e=fe("div"),t=fe("div"),n=fe("div"),o=fe("hr"),i=fe("span"),a=fe("span"),r=fe("select");he(e,"page-selection-container"),he(n,"page-comments-container"),he(a,"page-count-span"),he(i,"page-numeral-span"),he(t,"page-actions-container"),Me(a,"style","margin-left: 4px"),i.innerText=re,1==Z.length?a.innerText="comment":a.innerText="comments";r.id=g,ve&&(je(r),je(a),je(i));let l=fe("option"),c=fe("option"),d=fe("option");return l.id="newest",c.id="oldest",d.id="top",l.textContent="Newest",c.textContent="Oldest",d.textContent="Top",r.addEventListener("change",function(e){!function(e){let t=[];"Top"===e?t=se.voting?Z.sort((e,t)=>Number(t.vote_count)-Number(e.vote_count)):se.likes?Z.sort((e,t)=>Number(t.like_count)-Number(e.like_count)):[...Z]:"Oldest"===e?t=Z.sort((e,t)=>Number(e.id)-Number(t.id)):"Newest"===e&&(t=Z.sort((e,t)=>Number(t.id)-Number(e.id))),qe(t)}(e.target.value)}),be(n,i),be(n,a),be(r,l),be(r,c),be(r,d),be(t,n),be(t,r),be(e,t),be(e,o),e}());return t}()),be(n,function(){let e=fe("div"),t=fe("div");e.id=A,t.id=N,he(t,"comment-area");let n=tt(Z,"root");n&&be(t,n);return be(e,t),e}()),be(n,function(){let e=fe("div");e.id=K;let t=fe("hr"),n=fe("a"),o=fe("div"),i=fe("a");ve&&je(n);return he(o,"footer-container"),he(i,"icon-button-markdown"),n.innerHTML="Powered by Crowdpanel",Me(n,"href","https://crowdpanel.co"),Me(n,"target","_blank"),Me(i,"href","https://docs.crowdpanel.co/#/markdown"),Me(i,"target","_blank"),be(e,t),be(o,i),be(o,n),be(e,o),e}()),Re(t)}(function(){Ke(function(){it()})})})})):console.log("Please embed the 'crowdpanel-comments' div onto your webpage")};let at=!1;function rt(){at||(at=!0,function(){for(var e=t.getElementsByTagName("script"),n=0;n<e.length;n++)e[n].src.match(/\/crowdpanel-comments\.js$/)&&("dark"===e[n].dataset.theme&&(ve=!0),e[n].dataset.customCss&&(te=e[n].dataset.customCss))}(),e.main(void 0))}let lt=function(){let e=t.readyState;"loading"===e?t.addEventListener("readystatechange",lt):"interactive"===e?rt():"complete"===e&&rt()};lt()}(window,document);
