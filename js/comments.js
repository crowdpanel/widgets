!function(e,t){let n="crowdpanel-comments",o="crowdpanel-comments-main-area",i="crowdpanel-comments-error-area",a="crowdpanel-comments-textarea-container-",r="crowdpanel-comments-textarea-",l="crowdpanel-comments-logging-container",c="crowdpanel-comments-logged-in-container",d="crowdpanel-comments-logged-out-container",u="crowdpanel-comments-login-button",s="crowdpanel-comments-logout-button",m="crowdpanel-comments-submit-comment-button-",p="crowdpanel-comments-anon-name-",g="crowdpanel-comments-login-modal",v="crowdpanel-comments-login-form",f="crowdpanel-comments-login-submit",h="crowdpanel-comments-emoji-like",w="crowdpanel-comments-emoji-love",_="crowdpanel-comments-emoji-laugh",b="crowdpanel-comments-emoji-wow",y="crowdpanel-comments-emoji-sad",k="crowdpanel-comments-emoji-angry",x="crowdpanel-comments-emoji-like-count",T="crowdpanel-comments-emoji-love-count",j="crowdpanel-comments-emoji-laugh-count",C="crowdpanel-comments-emoji-wow-count",L="crowdpanel-comments-emoji-sad-count",M="crowdpanel-comments-emoji-angry-count",S="crowdpanel-comments-comment-area",E="crowdpanel-comments-comment-total-container-",A="crowdpanel-comments-comment-",N="crowdpanel-comments-comment-count-container-",R="crowdpanel-comments-comment-toggle-",B="crowdpanel-comments-comment-child-area-",H="crowdpanel-comments-comment-border-",D="crowdpanel-comments-comment-menu-",I="crowdpanel-comments-comment-menu-btn-",O="crowdpanel-comments-comment-approve-btn-",F="crowdpanel-comments-author-avatar",q="crowdpanel-comments-comment-badge-",P="crowdpanel-comments-reply-",G="crowdpanel-comments-upvote-",U="crowdpanel-comments-downvote-",$="crowdpanel-comments-like-",J="crowdpanel-comments-vote-count-",W="crowdpanel-comments-like-count-",V=null;const X="https://server.crowdpanel.co";let z=parent.location.pathname;const K=[],Q=[];let Y,Z,ee,te,ne,oe=0,ie=!1,ae=!1,re=null,le={},ce={},de={},ue={},se=!1,me=!1;function pe(e){return t.createElement(e)}function ge(e,t){e.classList.add("crowdpanel-comments-"+t)}function ve(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.add("crowdpanel-comments-"+n)})}}function fe(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{e.classList.remove("crowdpanel-comments-"+n)})}}function he(e,t){e.appendChild(t)}function we(e,t){e.prepend(t)}function _e(e){return t.getElementById(e)}function be(e){null!==e&&e.parentNode.removeChild(e)}function ye(e,t){null!==e&&e.classList.remove("crowdpanel-comments-"+t)}function ke(e){e.classList.add("crowdpanel-comments-dark")}function xe(e){if(null!==e){let t=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(t,e),t}return e}function Te(e,t,n){e.addEventListener("click",function(){t(n)},!1)}function je(e,t,n){e.setAttribute(t,n)}function Ce(e,t,n){e.removeAttribute(t,n)}function Le(){let e=("; "+t.cookie).split("; crowdpanel-widget-token=");if(2===e.length)return e.pop().split(";").shift()}function Me(e){let n="",o=new Date;o.setTime(o.getTime()+2592e6),n="; expires="+o.toUTCString(),t.cookie="crowdpanel-widget-token="+e+n+"; path=/"}function Se(e,t,n){let o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){n(JSON.parse(o.response))},o.send(JSON.stringify(t))}function Ee(e){"function"==typeof e&&e()}function Ae(e){K.length=0,z="/"===z?"index":z.replace(/\//,"");let n={domain:parent.location.host,path:z,title:t.title,userId:le.user_id};Se(X+"/api/widget/comment/main",n,function(t){if(t.error)return void Je(t.error.message);We(),ne=t.data[0].domain_id,te=t.data[0].page_id,Q.push(...t.data[0].moderators);let n=t.data.slice(1);oe=t.data[0].comment_count||0,se?Q.indexOf(le.email)>-1?(ie=!0,K.push(...n)):n&&n.forEach(e=>{e.author_id===le.user_id?(e.isCommentAuthor=!0,K.push(e)):"active"===e.status&&K.push(e)}):n.forEach(e=>{"active"===e.status&&K.push(e)}),Z=t.data[0].reaction,ae=t.data[0].anonymous&&!se,ce={self_moderate:t.data[0].self_moderate,likes:t.data[0].likes,voting:t.data[0].voting,emojis:t.data[0].emojis,time_stamp:t.data[0].time_stamp,emails:t.data[0].moderator_emails,anon:t.data[0].anonymous},de={google:t.data[0].google,facebook:t.data[0].facebook,github:t.data[0].github,crowdpanel:t.data[0].crowdpanel,sso:t.data[0].sso},ue={like_count:t.data[0].thumbs_up_count,love_count:t.data[0].love_count,laugh_count:t.data[0].laugh_count,wow_count:t.data[0].wow_count,sad_count:t.data[0].sad_count,angry_count:t.data[0].angry_count},Ee(e)})}function Ne(e){let t=pe("div"),n=pe("div"),o=pe("textarea"),i=pe("button"),l=pe("div");if(t.id=a+e,n.id=c,o.id=r+e,i.id=m+e,ge(t,"textarea-container"),ge(o,"textarea"),ge(l,"anon-container"),me&&ke(o),ge(i,"submit-button"),0==K.length&&"root"==e?je(o,"placeholder","Be the first to comment"):je(o,"placeholder","Add a comment"),"root"!==e&&je(t,"style","padding-left: 40px"),i.innerText="COMMENT",o.oninput=function(e,t){return function(){if(e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px",ae){let n=_e(p+t);e.value.length>0?(Ce(n,"style","display: none"),je(n,"style","display: block")):(Ce(n,"style","display: block"),je(n,"style","display: none"))}}}(o,e),Te(i,Oe,e),ae){let t=pe("input");je(t,"type","text"),je(t,"placeholder","Name"),t.required=!0,t.id=p+e,ge(t,"anon-input"),je(t,"style","display: none"),he(l,t)}return he(t,n),he(t,o),he(l,i),he(t,l),t}function Re(e,t){t?(je(e,"style","border: none"),ge(e,"toggle--loading")):(je(e,"style","color: transparent"),ge(e,"button--loading"))}function Be(e,t){t?(Ce(e,"style","border: none"),ye(e,"toggle--loading")):(je(e,"style","color: white"),ye(e,"button--loading"))}function He(e){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)}function De(e){const t=["#D83B01","#B50E0E","#E81123","#B4009E","#5C2D91","#0078D7","#00B4FF","#008272","#107C10","#FFB900"];if(!e)return t[0];let n=0;for(let t=0;t<e.length;t++)n+=e.charCodeAt(t);return t[n%t.length]}function Ie(e){let t=_e(S);t.innerHTML="";let n=Ye(e,"root");n&&he(t,n)}function Oe(t){Re(_e(m+t)),se?e.newComment(t,Le()):ae?e.newAnonComment(t):(Be(_e(m+t)),e.loginBoxShow(t))}function Fe(e){_e(D+e).classList.toggle("crowdpanel-comments-dropdown-opened")}function qe(t){let n=_e(N+t),o=_e(R+t),i=_e(H+t);ye(o,"comments-toggle-up"),ge(o,"comments-toggle-down"),je(i,"style","display: block"),e.loadChildren(t),Te(n=xe(n),Pe,t)}function Pe(e){let t=_e(N+e),n=_e(R+e),o=_e(B+e),i=_e(H+e);ye(n,"comments-toggle-down"),ge(n,"comments-toggle-up"),je(i,"style","display: none"),je(o,"style","display: none"),Te(t=xe(t),Ge,e)}function Ge(e){let t=_e(N+e),n=_e(R+e),o=_e(B+e),i=_e(H+e);ye(n,"comments-toggle-up"),ge(n,"comments-toggle-down"),je(i,"style","display: block"),Ce(o,"style","display: none"),Te(t=xe(t),Pe,e)}function Ue(t,n,o,i,a){return t=xe(t),n=xe(n),i>0?(Te(t,e.voteComment,[o,[1,0],a]),Te(n,e.voteComment,[o,[1,-1],a])):i<0?(Te(t,e.voteComment,[o,[-1,1],a]),Te(n,e.voteComment,[o,[-1,0],a])):(Te(t,e.voteComment,[o,[0,1],a]),Te(n,e.voteComment,[o,[0,-1],a])),[t,n]}function $e(t,n,o,i){return Te(t=xe(t),e.likeRequest,[n,!o,i]),t}function Je(e){let t=_e(i);t.innerText=e,je(t,"style","display: block;")}function We(){je(_e(i),"style","display: none;")}function Ve(e){if(Z){let e=_e(h),t=_e(w),n=_e(_),o=_e(b),i=_e(y),a=_e(k);switch(ve(e,t,n,o,i,a,"emoji-unactive"),Z){case"like":ye(e,"emoji-unactive"),ge(e,"emoji-active");break;case"love":ye(t,"emoji-unactive"),ge(t,"emoji-active");break;case"laugh":ye(n,"emoji-unactive"),ge(n,"emoji-active");break;case"wow":ye(o,"emoji-unactive"),ge(o,"emoji-active");break;case"sad":ye(i,"emoji-unactive"),ge(i,"emoji-active");break;case"angry":ye(a,"emoji-unactive"),ge(a,"emoji-active")}}Ee(e)}function Xe(){let t,n=pe("div"),o=pe("div"),i=pe("span");i.innerText=le.full_name;let a=pe("button");return n.id=c,a.id=s,ge(a,"button"),ge(n,"logging-container"),ge(o,"logging-container-left-div"),me&&(ke(a),ke(o)),a.innerText="Logout",Te(a,e.logout,null),le.avatar_url?((t=pe("img")).src=le.avatar_url,ge(t,"author-avatar-img")):((t=pe("div")).style.background=De(le.full_name),t.innerHTML=le.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),ge(t,"author-avatar-alpha")),ae=!1,he(o,t),he(o,i),he(n,a),he(n,o),n}function ze(){let t=pe("div"),n=pe("button");return t.id=d,n.id=u,ge(n,"button"),me&&ke(n),ge(t,"logging-container"),n.innerText="Login",Te(n,e.loginBoxShow,null),ae=ce.anon,he(t,n),t}function Ke(e){be(_e(d)),he(_e(l),Xe()),Ee(e)}function Qe(t,n,o){let i=pe("div"),a=pe("button"),r=pe("div");if(a.id=I+t,r.id=D+t,ge(a,"icon-button-menu"),ge(i,"dropdown"),me&&ke(a),ge(r,"dropdown-content"),Te(a,Fe,t),ie&&("flagged"===n||"pending"===n)){let n=pe("span");n.id=O+t,n.innerText="Approve",Te(n,e.approveComment,t),he(r,n)}if(ie||o){let n=pe("span");n.innerText="Delete",Te(n,e.deleteComment,t),he(r,n)}return he(i,a),he(i,r),i}function Ye(t,n){let o=pe("div"),i=new Date;return t.forEach(function(t){let n,a=new Date(t.created_at),r=pe("div"),l=pe("div"),c=pe("div"),d=pe("div"),u=pe("div"),s=pe("div"),m=pe("div"),p=pe("div"),g=pe("div"),v=pe("span"),f=pe("div"),h=pe("div"),w=pe("div"),_=pe("div"),b=pe("div"),y=pe("div"),k=pe("span"),x=pe("span"),T=pe("span");l.id=A+t.id,g.id=B+t.id,r.id=E+t.id,h.id=R+t.id,y.id=N+t.id,u.id=H+t.id,ge(r,"total-container"),ge(l,"comment-container"),ge(g,"comment-child-container"),ge(c,"comment-left"),ge(d,"comment-right"),ge(s,"comment-head"),ge(m,"comment-body"),ge(p,"comment-footer"),ge(u,"comment-border"),ge(f,"comment-toggle-container"),ge(x,"comment-date"),ge(k,"author-name"),me&&(ke(m),ke(x),ke(k),ke(v),ke(T)),ge(v,"reply-button"),ge(h,"comments-toggle"),ge(h,"comments-toggle-up"),ge(T,"comment-reply-count"),ge(w,"author-name-container"),ge(_,"comment-head-left-container"),ge(b,"footer-actions-container"),ge(y,"comment-count-container"),m.innerHTML=t.comment_text,k.innerText=t.full_name;let j=Q.indexOf(t.email)>-1;if(x.innerHTML=function(e,t){let n=i-a;return n<15e3?"just now":n<12e4?Math.round(n/1e3)+" seconds ago":n<72e5?Math.round(n/6e4)+" minutes ago":n<1728e5?Math.round(n/36e5)+" hours ago":n<5184e6?Math.round(n/864e5)+" days ago":n<62208e6?Math.round(n/2592e6)+" months ago":Math.round(n/31104e6)+" years ago"}(),x.title=a,v.id=P+t.id,v.innerHTML="Reply",T.innerHTML=t.children_count,Te(v,e.showReply,t.id),Te(y,qe,t.id),t.avatar_url?((n=pe("img")).src=t.avatar_url,ge(n,"author-avatar-img")):((n=pe("div")).style.background=De(t.full_name),n.innerHTML=t.full_name.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()||"?",ge(n,"author-avatar-alpha")),n.id=F,he(c,n),he(w,k),(j||"active"!==t.status)&&he(w,function(e,t,n){let o=pe("span");return ge(o,"comment-badge"),o.id=q+e,n?ge(o,"comment-badge-moderator"):"flagged"===t?(ge(o,"comment-badge-flagged"),o.innerHTML="FLAGGED"):"pending"===t&&(ge(o,"comment-badge-pending"),o.innerHTML="PENDING"),o}(t.id,t.status,j)),he(_,w),ce.time_stamp&&he(_,x),he(s,_),se?ie?he(s,Qe(t.id,t.status,t.isCommentAuthor)):t.isCommentAuthor&&he(s,Qe(t.id,t.status,t.isCommentAuthor)):ae&&t.isCommentAuthor&&he(s,Qe(t.id,t.status,t.isCommentAuthor)),ce.voting){let n=pe("button"),o=pe("button"),i=pe("div"),a=pe("span");if(n.id=G+t.id,o.id=U+t.id,a.id=J+t.id,se){t.vote_value>0?ge(n,"vote-active"):t.vote_value<0&&ge(o,"vote-active");let e=Ue(n,o,t.id,t.vote_value,t.like_id);n=e[0],o=e[1]}else Te(n,e.loginBoxShow,null),Te(o,e.loginBoxShow,null);ge(n,"icon-button-upvote"),ge(o,"icon-button-downvote"),ge(a,"numeral-span"),me&&ke(a),ge(i,"footer-voting-container"),a.innerText=He(t.vote_count),he(i,n),he(i,a),he(i,o),he(b,i)}else if(ce.likes){let n=pe("button"),o=pe("div"),i=pe("span");n.id=$+t.id,i.id=W+t.id,se?(t.liked&&ge(n,"like-active"),n=$e(n,t.id,t.liked,t.like_id)):Te(n,e.loginBoxShow,null),ge(n,"icon-button-like"),ge(i,"numeral-span"),me&&(ke(n),ke(i)),ge(o,"footer-likes-container"),i.innerText=He(t.like_count),he(o,n),he(o,i),he(b,o)}he(p,v),he(p,b),he(d,s),he(d,m),he(d,p),he(l,c),he(l,d),he(y,T),he(f,h),he(y,f),t.children_count>0&&he(r,y),he(r,u),he(r,l),he(r,g),he(o,r)}),o}function Ze(){void 0===Y?tt():et(Y,tt)}function et(e,n){let o=t.getElementsByTagName("HEAD")[0],i=pe("link");i.rel="stylesheet",i.type="text/css",i.href=e,function(e,t,n){i.addEventListener("load",function(){t(void 0)})}(0,n),he(o,i)}function tt(){je(_e(o),"style","")}e.socialAuth=function(t){let n={provider:t.provider,domainId:ne},o=window.open("","_blank");Se(X+"/api/widget/oauth",n,function(e){o.location=e.data,ee=e.token});var i=setInterval(function(){o.closed&&(clearInterval(i),Se(X+"/api/widget/authlogin",{sessionToken:ee},function(t){if(t.error)return Je(t.error.message),void(se=!1);e.loginBoxClose(),We(),se=!0,Me(t[0].user_id),le=t[0],Ke(function(){Ae(function(){Ve(function(){Ie(K)})})})}))},250)},e.newAnonComment=function(t){let n=_e(r+t),o=n.value,i=_e(p+t);if(""===o)return ge(n,"red-border"),void Be(_e(m+t));if(ae&&""===i.value)return ge(i,"red-border"),void Be(_e(m+t));ye(n,"red-border"),ye(i,"red-border");let a=ce.self_moderate?"pending":"active";const l="root"===t?null:t;let c={full_name:i.value,status:a,page_id:te,parent_id:l,comment_text:o,created_at:new Date};Se(X+"/api/widget/comment/anon",c,function(o){if(o.error||!o)return void Be(_e(m+t));n.value="",i.value="",Ce(i,"style","display: block"),je(i,"style","display: none"),Be(_e(m+t)),"root"!==t&&e.collapseReply(t);let r=Ye([{id:o.data[0].id,full_name:c.full_name,avatar_url:null,author_id:o.data[0].author_id,page_id:o.data[0].page_id,comment_text:o.data[0].comment_text,status:a,parent_id:o.data[0].parent_id,vote_count:0,like_count:0,created_at:c.created_at,isCommentAuthor:!0}]);we(_e("root"!==t?B+t:S),r)})},e.newComment=function(t,n){let o=_e(r+t),i=o.value;if(""===i)return ge(o,"red-border"),void Be(_e(m+t));ye(o,"red-border");let a="pending";ce.self_moderate?ie&&(a="active"):a="active";let l={author_id:n,status:a,page_id:te,parent_id:"root"===t?null:t,comment_text:i,created_at:new Date};Se(X+"/api/widget/comment/new",l,function(n){if(n.error||!n)return void Be(_e(m+t));o.value="",Be(_e(m+t)),"root"!==t&&e.collapseReply(t);let i=Ye([{id:n.data[0].id,full_name:le.full_name,avatar_url:le.avatar_url,author_id:n.data[0].author_id,page_id:n.data[0].page_id,comment_text:n.data[0].comment_text,status:a,parent_id:n.data[0].parent_id,vote_count:0,like_count:0,created_at:l.created_at,isCommentAuthor:!0}]);we(_e("root"!==t?B+t:S),i)})},e.deleteComment=function(e){if(ie&&Fe(e),!confirm("Are you sure you want to delete this comment?"))return;let t={id:e,user_id:le.user_id};Se(X+"/api/widget/comment/remove",t,function(t){if(t.error||!t)return;let n=_e(E+e);"deleted"===t.data[0].status&&je(n,"style","display: none")})},e.approveComment=function(e){if(Fe(e),!ie)return;let t={id:e,user_id:le.user_id};Se(X+"/api/widget/comment/approve",t,function(t){if(!t.error&&t&&"active"===t.data[0].status){let t=_e(q+e),n=_e(O+e);je(t,"style","display: none"),je(n,"style","display: none")}})},e.loadChildren=function(e){if("root"===e)return;let t;Re(_e(R+e),!0),t=ce.voting?"votes":ce.likes?"likes":null,json={parentId:e,userId:le.user_id,votesOrLikes:t},Se(X+"/api/widget/comment/children",json,function(t){if(t.error||!t)return void Be(_e(R+e),!0);let n=[],o=!1;se?ie?n.push(...t.data):t.data.forEach(e=>{e.author_id===le.user_id?(e.isCommentAuthor=!0,n.push(e)):"active"===e.status?n.push(e):o=!0}):t.data.forEach(e=>{"active"===e.status?n.push(e):o=!0});let i=Ye(n),a=_e(B+e);if(i&&we(a,i),o){let e=pe("span");ge(e,"no-replies-span"),me&&ke(e),e.innerHTML="<em>Some comments have been filtered<em>",we(a,e)}Be(_e(R+e),!0)})},e.likeRequest=function(e){let t=e[0],n=e[1],o=e[2],i=_e($+t),a=_e(W+t);n?(ge(i,"like-active"),a.innerText=He(parseInt(a.innerText)+1)):(ye(i,"like-active"),a.innerText=He(parseInt(a.innerText)-1));var r={user_id:le.user_id,comment_id:t,page_id:te,liked:n,likeId:o};Se(X+"/api/widget/comment/like",r,function(e){if(e.error)return;We();let o=e.data[0].id;i=$e(i,t,n,o)})},e.voteComment=function(e){let t=e[0],n=e[1][0],o=e[1][1],i=e[2],a=_e(G+t),r=_e(U+t),l=_e(J+t);var c={user_id:le.user_id,comment_id:t,page_id:te,vote_val:o,voteId:i};ye(a,"vote-active"),ye(r,"vote-active"),o>0?ge(a,"vote-active"):o<0&&ge(r,"vote-active"),l.innerText=He(parseInt(l.innerText)+o-n),Se(X+"/api/widget/comment/vote",c,function(e){if(e.error)return;We(),i=e.data[0].id;let n=Ue(a,r,t,o,i);a=n[0],r=n[1]})},e.pageReact=function(t){if(!se&&!ae)return void e.loginBoxShow(id=null);let n,o,i=_e(h),a=_e(w),r=_e(_),l=_e(b),c=_e(y),d=_e(k),u=_e(x),s=_e(T),m=_e(j),p=_e(C),g=_e(L),v=_e(M);if(fe(i,a,r,l,c,d,"emoji-active"),"remove"==(n=Z?Z===t?"remove":"change":"new")||"change"==n){switch(Z){case"like":ue.like_count=ue.like_count-1,u.innerText=He(ue.like_count);break;case"love":ue.love_count=ue.love_count-1,s.innerText=He(ue.love_count);break;case"laugh":ue.laugh_count=ue.laugh_count-1,m.innerText=He(ue.laugh_count);break;case"wow":ue.wow_count=ue.wow_count-1,p.innerText=He(ue.wow_count);break;case"sad":ue.sad_count=ue.sad_count-1,g.innerText=He(ue.sad_count);break;case"angry":ue.angry_count=ue.angry_count-1,v.innerText=He(ue.angry_count)}Z=""}if("change"==n||"new"==n)switch(ve(i,a,r,l,c,d,"emoji-unactive"),Z=t,t){case"like":ye(i,"emoji-unactive"),ge(i,"emoji-active"),ue.like_count=ue.like_count+1,u.innerText=He(ue.like_count);break;case"love":ye(a,"emoji-unactive"),ge(a,"emoji-active"),ue.love_count=ue.love_count+1,s.innerText=He(ue.love_count);break;case"laugh":ye(r,"emoji-unactive"),ge(r,"emoji-active"),ue.laugh_count=ue.laugh_count+1,m.innerText=He(ue.laugh_count);break;case"wow":ye(l,"emoji-unactive"),ge(l,"emoji-active"),ue.wow_count=ue.wow_count+1,p.innerText=He(ue.wow_count);break;case"sad":ye(c,"emoji-unactive"),ge(c,"emoji-active"),ue.sad_count=ue.sad_count+1,g.innerText=He(ue.sad_count);break;case"angry":ye(d,"emoji-unactive"),ge(d,"emoji-active"),ue.angry_count=ue.angry_count+1,v.innerText=He(ue.angry_count)}else fe(i,a,r,l,c,d,"emoji-unactive");if(ue.like_count>0&&je(u,"style","display: block"),ue.love_count>0&&je(s,"style","display: block"),ue.laugh_count>0&&je(m,"style","display: block"),ue.wow_count>0&&je(p,"style","display: block"),ue.sad_count>0&&je(g,"style","display: block"),ue.angry_count>0&&je(v,"style","display: block"),le.user_id)o=le.user_id;else{if(!ae)return;o=null}Se(X+"/api/widget/emojireact",{reaction:t,page_id:te,user_id:o,action:n,currentReactionId:re},function(e){e.error||(re=e.data[0].id)})},e.popupRender=function(t){let n=_e(g),o=pe("div"),i=pe("div"),a=pe("span"),r=pe("div"),l=pe("div"),c=pe("div"),d=pe("div");if(a.innerHTML="&times;",ge(o,"modal-area"),ge(a,"modal-close"),ge(i,"login-modal-content"),ge(r,"modal-header"),ge(l,"modal-body"),ge(d,"social-login-container"),ge(c,"modal-footer"),Te(a,e.loginBoxClose),he(r,a),de.google){let t=pe("button"),n=pe("span"),o=pe("span");ge(n,"google-logo"),o.innerText="Google",ge(t,"login-button-google"),Te(t,e.socialAuth,{provider:"google"}),he(t,n),he(t,o),he(d,t)}if(de.facebook){let t=pe("button"),n=pe("span"),o=pe("span");ge(n,"facebook-logo"),o.innerText="Facebook",ge(t,"login-button-facebook"),Te(t,e.socialAuth,{provider:"facebook"}),he(t,n),he(t,o),he(d,t)}if(de.github){let t=pe("button"),n=pe("span"),o=pe("span");ge(n,"github-logo"),o.innerText="Github",ge(t,"login-button-github"),Te(t,e.socialAuth,{provider:"github"}),he(t,n),he(t,o),he(d,t)}if(he(l,d),de.sso){let t=pe("button");t.id=ID_LOGIN_SSO,t.innerText="Proceed With "+parent.location.host,ge(t,"login-button-sso"),Te(t,e.socialAuth,{provider:"sso"}),he(l,t)}if(de.crowdpanel){let n=pe("form"),o=pe("span"),i=pe("a"),a=pe("a"),r=pe("input"),d=pe("input"),u=pe("button");n.id=v,r.id="crowdpanel-comments-login-box-email",d.id="crowdpanel-comments-login-box-password",u.id=f,u.innerHTML="Login",o.innerHTML="Don't have an account?",a.innerHTML="Forgot Password",i.innerHTML="Sign up",ge(u,"login-button-crowdpanel"),je(r,"type","email"),je(r,"placeholder","Email"),r.required=!0,je(d,"type","password"),je(d,"placeholder","Password"),d.required=!0,je(u,"type","submit"),je(a,"href","https://dashboard.crowdpanel.co/forgot-password"),je(i,"href","https://dashboard.crowdpanel.co/signup"),je(i,"target","_blank"),he(n,r),he(n,d),he(n,u),he(l,n),he(l,a),he(c,o),he(c,i),n.addEventListener("submit",function(n){Re(u),n.preventDefault(),e.login(n,t)})}he(i,r),he(i,l),he(i,c),he(o,i),he(n,o)},e.showReply=function(t){var n,o;n=_e(A+t),o=Ne(t),n.parentNode.insertBefore(o,n.nextSibling);let i=_e(P+t);i.innerText="Cancel",Te(i=xe(i),e.collapseReply,t)},e.collapseReply=function(t){let n=_e(P+t);_e(a+t).remove(),n.innerText="Reply",Te(n=xe(n),e.showReply,t)},e.login=function(t,n){!function(t,n,o){let i={email:t,password:n,pageId:te};_e(v).reset(),Se(X+"/api/widget/login",i,function(t){if(t.error||0===t.length)return Be(_e(f)),void Je(t.error.message);Be(_e(f)),e.loginBoxClose(),We(),se=!0,Me(t[0].user_id),le=t[0],Ke(function(){Ae(function(){Ve(function(){Ie(K)})})})})}(t.target[0].value,t.target[1].value)},e.logout=function(){t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",t.cookie="crowdpanel-widget-token=;expires="+new Date(0).toUTCString()+"; path=/",se=!1,le={},userVoted={},be(_e(c)),he(_e(l),ze()),_e(n).innerHTML="",K.length=0,Q.length=0,ie=!1,ae=!1,se=!1,de={},ue={},le={},Z=null,re=null,oe=0,e.main(void 0)},e.loginBoxClose=function(){let e=_e(o),t=_e(g);ye(e,"blurred"),je(t,"style","display: none")},e.loginBoxShow=function(t){let n=_e(o),i=_e(g);e.popupRender(t),ge(n,"blurred"),je(i,"style",""),window.location.hash=g},e.main=function(t){null!==(V=_e(n))?(function(){let e=pe("div");e.id=g,he(V,e)}(),function(){let e=pe("div");e.id=i,ge(e,"error-container"),je(e,"style","display: none;"),he(V,e)}(),function(){let e=pe("div");e.id=o,ge(e,"main-area"),me&&ke(e),je(e,"style","display: none"),he(V,e)}(),et("https://cdn.jsdelivr.net/gh/crowdpanel/widgets/css/comments.min.css",Ze),function(e){let t=Le();if(!t)return se=!1,void Ee(e);Se(X+"/api/widget/self",{userToken:t},function(t){!t.error&&t?(se=!0,le=t.data,Ee(e)):Ee(e)})}(function(){Ae(function(){!function(t){let n=_e(o);he(n,function(){let t=pe("div"),n=pe("div");return t.id="crowdpanel-comments-head-container",n.id=l,ce.emojis&&he(t,function(){let t=pe("div"),n=pe("div"),o=pe("div"),i=pe("div"),a=pe("div"),r=pe("div"),l=pe("div"),c=pe("div"),d=pe("button"),u=pe("button"),s=pe("button"),m=pe("button"),p=pe("button"),g=pe("button"),v=pe("span"),f=pe("span"),S=pe("span"),E=pe("span"),A=pe("span"),N=pe("span"),R=pe("span"),B=pe("span"),H=pe("span"),D=pe("span"),I=pe("span"),O=pe("span");return R.innerText="Like",B.innerText="Love",H.innerText="Funny",D.innerText="Wow",I.innerText="Sad",O.innerText="Angry",d.id=h,s.id=w,m.id=_,u.id=b,p.id=y,g.id=k,v.id=x,S.id=T,E.id=j,f.id=C,A.id=L,N.id=M,Te(d,e.pageReact,"like"),Te(s,e.pageReact,"love"),Te(m,e.pageReact,"laugh"),Te(u,e.pageReact,"wow"),Te(p,e.pageReact,"sad"),Te(g,e.pageReact,"angry"),ve(R,B,H,D,I,O,"tooltip-text"),ge(n,"emojis-container"),ve(o,a,r,i,l,c,"emoji-container"),ge(d,"emoji-like"),ge(s,"emoji-love"),ge(m,"emoji-laugh"),ge(u,"emoji-wow"),ge(p,"emoji-sad"),ge(g,"emoji-angry"),ve(v,S,E,f,A,N,"emoji-count"),v.innerText=He(ue.like_count),S.innerText=He(ue.love_count),E.innerText=He(ue.laugh_count),f.innerText=He(ue.wow_count),A.innerText=He(ue.sad_count),N.innerText=He(ue.angry_count),ue.like_count<1&&je(v,"style","display: none"),ue.love_count<1&&je(S,"style","display: none"),ue.laugh_count<1&&je(E,"style","display: none"),ue.wow_count<1&&je(f,"style","display: none"),ue.sad_count<1&&je(A,"style","display: none"),ue.angry_count<1&&je(N,"style","display: none"),he(o,d),he(o,v),he(d,R),he(a,s),he(a,S),he(s,B),he(r,m),he(r,E),he(m,H),he(i,u),he(i,f),he(u,D),he(l,p),he(l,A),he(p,I),he(c,g),he(c,N),he(g,O),function(...e){if(void 0!==e&&e.length>2){let t=e.slice(0,-1),n=e.slice(-1)[0];t.forEach(e=>{n.appendChild(e)})}}(o,a,r,i,l,c,n),he(t,n),t}()),he(t,n),se&&0!==Object.keys(le).length?he(t,Xe()):he(t,ze()),he(t,Ne("root")),K.length>0&&he(t,function(){let e=pe("div"),t=pe("div"),n=pe("div"),o=pe("hr"),i=pe("span"),a=pe("span"),r=pe("select");ge(e,"page-selection-container"),ge(n,"page-comments-container"),ge(a,"page-count-span"),ge(i,"page-numeral-span"),ge(t,"page-actions-container"),je(a,"style","margin-left: 4px"),i.innerText=oe,1==K.length?a.innerText="comment":a.innerText="comments",r.id="crowdpanel-comments-select-order",me&&(ke(r),ke(a),ke(i));let l=pe("option"),c=pe("option"),d=pe("option");return l.id="newest",c.id="oldest",d.id="top",l.textContent="Newest",c.textContent="Oldest",d.textContent="Top",r.addEventListener("change",function(e){!function(e){let t=[];"Top"===e?t=ce.voting?K.sort((e,t)=>Number(t.vote_count)-Number(e.vote_count)):ce.likes?K.sort((e,t)=>Number(t.like_count)-Number(e.like_count)):[...K]:"Oldest"===e?t=K.sort((e,t)=>Number(e.id)-Number(t.id)):"Newest"===e&&(t=K.sort((e,t)=>Number(t.id)-Number(e.id))),Ie(t)}(e.target.value)}),he(n,i),he(n,a),he(r,l),he(r,c),he(r,d),he(t,n),he(t,r),he(e,t),he(e,o),e}()),t}()),he(n,function(){let e=pe("div"),t=pe("div");e.id="crowdpanel-comments-main-comments-area",t.id=S,ge(t,"comment-area");let n=Ye(K);return n&&he(t,n),he(e,t),e}()),he(n,function(){let e=pe("div");e.id="crowdpanel-comments-footer-area";let t=pe("hr"),n=pe("a"),o=pe("div"),i=pe("a");return me&&ke(n),ge(o,"footer-container"),ge(i,"icon-button-markdown"),n.innerHTML="Powered by Crowdpanel",je(n,"href","https://crowdpanel.co"),je(n,"target","_blank"),je(i,"href","https://docs.crowdpanel.co/#/markdown"),je(i,"target","_blank"),he(e,t),he(o,i),he(o,n),he(e,o),e}()),Ee(function(){Ve(function(){tt()})})}()})})):console.log("Please embed the 'crowdpanel-comments' div onto your webpage")};let nt=!1;function ot(){nt||(nt=!0,function(){for(var e=t.getElementsByTagName("script"),n=0;n<e.length;n++)e[n].src.match(/\/crowdpanel-comments\.js$/)&&("dark"===e[n].dataset.theme&&(me=!0),e[n].dataset.customCss&&(Y=e[n].dataset.customCss))}(),e.main(void 0))}let it=function(){let e=t.readyState;"loading"===e?t.addEventListener("readystatechange",it):"interactive"===e?ot():"complete"===e&&ot()};it()}(window,document);
